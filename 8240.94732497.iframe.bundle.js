/*! For license information please see 8240.94732497.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkorcs_design_system=self.webpackChunkorcs_design_system||[]).push([[8240],{"./node_modules/@fortawesome/react-fontawesome/index.es.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>FontAwesomeIcon});var _fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@fortawesome/fontawesome-svg-core/index.es.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function camelize(string){return function _isNumerical(obj){return(obj-=0)==obj}(string)?string:(string=string.replace(/[\-_\s]+(.)?/g,function(match,chr){return chr?chr.toUpperCase():""})).substr(0,1).toLowerCase()+string.substr(1)}var PRODUCTION=!1;try{PRODUCTION=!0}catch(e){}function normalizeIconArgs(icon){return null===icon?null:"object"===_typeof(icon)&&icon.prefix&&icon.iconName?icon:Array.isArray(icon)&&2===icon.length?{prefix:icon[0],iconName:icon[1]}:"string"==typeof icon?{prefix:"fas",iconName:icon}:void 0}function objectWithKey(key,value){return Array.isArray(value)&&value.length>0||!Array.isArray(value)&&value?_defineProperty({},key,value):{}}function FontAwesomeIcon(_ref){var forwardedRef=_ref.forwardedRef,props=_objectWithoutProperties(_ref,["forwardedRef"]),iconArgs=props.icon,maskArgs=props.mask,symbol=props.symbol,className=props.className,title=props.title,iconLookup=normalizeIconArgs(iconArgs),classes=objectWithKey("classes",[].concat(_toConsumableArray(function classList(props){var _classes,spin=props.spin,pulse=props.pulse,fixedWidth=props.fixedWidth,inverse=props.inverse,border=props.border,listItem=props.listItem,flip=props.flip,size=props.size,rotation=props.rotation,pull=props.pull,classes=(_defineProperty(_classes={"fa-spin":spin,"fa-pulse":pulse,"fa-fw":fixedWidth,"fa-inverse":inverse,"fa-border":border,"fa-li":listItem,"fa-flip-horizontal":"horizontal"===flip||"both"===flip,"fa-flip-vertical":"vertical"===flip||"both"===flip},"fa-".concat(size),null!=size),_defineProperty(_classes,"fa-rotate-".concat(rotation),null!=rotation&&0!==rotation),_defineProperty(_classes,"fa-pull-".concat(pull),null!=pull),_defineProperty(_classes,"fa-swap-opacity",props.swapOpacity),_classes);return Object.keys(classes).map(function(key){return classes[key]?key:null}).filter(function(key){return key})}(props)),_toConsumableArray(className.split(" ")))),transform=objectWithKey("transform","string"==typeof props.transform?_fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_0__.qg.transform(props.transform):props.transform),mask=objectWithKey("mask",normalizeIconArgs(maskArgs)),renderedIcon=(0,_fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_0__.Kk)(iconLookup,_objectSpread2({},classes,{},transform,{},mask,{symbol,title}));if(!renderedIcon)return function log(){var _console;!PRODUCTION&&console&&"function"==typeof console.error&&(_console=console).error.apply(_console,arguments)}("Could not find icon",iconLookup),null;var abstract=renderedIcon.abstract,extraProps={ref:forwardedRef};return Object.keys(props).forEach(function(key){FontAwesomeIcon.defaultProps.hasOwnProperty(key)||(extraProps[key]=props[key])}),convertCurry(abstract[0],extraProps)}FontAwesomeIcon.displayName="FontAwesomeIcon",FontAwesomeIcon.propTypes={border:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,className:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,mask:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,prop_types__WEBPACK_IMPORTED_MODULE_2___default().array,prop_types__WEBPACK_IMPORTED_MODULE_2___default().string]),fixedWidth:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,inverse:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,flip:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOf(["horizontal","vertical","both"]),icon:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,prop_types__WEBPACK_IMPORTED_MODULE_2___default().array,prop_types__WEBPACK_IMPORTED_MODULE_2___default().string]),listItem:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,pull:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOf(["right","left"]),pulse:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,rotation:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOf([0,90,180,270]),size:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,symbol:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,prop_types__WEBPACK_IMPORTED_MODULE_2___default().string]),title:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,transform:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,prop_types__WEBPACK_IMPORTED_MODULE_2___default().object]),swapOpacity:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool},FontAwesomeIcon.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var convertCurry=function convert(createElement,element){var extraProps=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof element)return element;var children=(element.children||[]).map(function(child){return convert(createElement,child)}),mixins=Object.keys(element.attributes||{}).reduce(function(acc,key){var val=element.attributes[key];switch(key){case"class":acc.attrs.className=val,delete element.attributes.class;break;case"style":acc.attrs.style=function styleToObject(style){return style.split(";").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(acc,pair){var i=pair.indexOf(":"),prop=camelize(pair.slice(0,i)),value=pair.slice(i+1).trim();return prop.startsWith("webkit")?acc[function capitalize(val){return val.charAt(0).toUpperCase()+val.slice(1)}(prop)]=value:acc[prop]=value,acc},{})}(val);break;default:0===key.indexOf("aria-")||0===key.indexOf("data-")?acc.attrs[key.toLowerCase()]=val:acc.attrs[camelize(key)]=val}return acc},{attrs:{}}),_extraProps$style=extraProps.style,existingStyle=void 0===_extraProps$style?{}:_extraProps$style,remaining=_objectWithoutProperties(extraProps,["style"]);return mixins.attrs.style=_objectSpread2({},mixins.attrs.style,{},existingStyle),createElement.apply(void 0,[element.tag,_objectSpread2({},mixins.attrs,{},remaining)].concat(_toConsumableArray(children)))}.bind(null,react__WEBPACK_IMPORTED_MODULE_1__.createElement)},"./node_modules/fast-deep-equal/index.js":module=>{module.exports=function equal(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var length,i,keys;if(Array.isArray(a)){if((length=a.length)!=b.length)return!1;for(i=length;0!==i--;)if(!equal(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if((length=(keys=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(i=length;0!==i--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length;0!==i--;){var key=keys[i];if(!equal(a[key],b[key]))return!1}return!0}return a!=a&&b!=b}},"./node_modules/react-arborist/dist/module/components/tree.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>Tree});var utils_namespaceObject={};__webpack_require__.r(utils_namespaceObject),__webpack_require__.d(utils_namespaceObject,{T_:()=>access,$s:()=>bound,as:()=>dfs,Mi:()=>focusNextElement,IO:()=>focusPrevElement,ES:()=>getInsertIndex,Bf:()=>getInsertParentId,ls:()=>identify,yQ:()=>identifyNull,qh:()=>indexOf,Lx:()=>isClosed,K9:()=>isDescendant,WZ:()=>isItem,J4:()=>isOpenWithEmptyChildren,FS:()=>safeRun,fm:()=>waitFor,GG:()=>walk});var NativeTypes_namespaceObject={};__webpack_require__.r(NativeTypes_namespaceObject),__webpack_require__.d(NativeTypes_namespaceObject,{FILE:()=>FILE,HTML:()=>HTML,TEXT:()=>TEXT,URL:()=>URL});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),shim=__webpack_require__("./node_modules/use-sync-external-store/shim/index.js");const TreeApiContext=(0,react.createContext)(null);function useTreeApi(){const value=(0,react.useContext)(TreeApiContext);if(null===value)throw new Error("No Tree Api Provided");return value}const NodesContext=(0,react.createContext)(null);const DndContext=(0,react.createContext)(null);const DataUpdatesContext=(0,react.createContext)(0);function useDataUpdates(){(0,react.useContext)(DataUpdatesContext)}function bound(n,min,max){return Math.max(Math.min(n,max),min)}function isItem(node){return node&&node.isLeaf}function isClosed(node){return node&&node.isInternal&&!node.isOpen}function isOpenWithEmptyChildren(node){var _a;return node&&node.isOpen&&!(null===(_a=node.children)||void 0===_a?void 0:_a.length)}const isDescendant=(a,b)=>{let n=a;for(;n;){if(n.id===b.id)return!0;n=n.parent}return!1},indexOf=node=>{if(!node.parent)throw Error("Node does not have a parent");return node.parent.children.findIndex(c=>c.id===node.id)};function dfs(node,id){if(!node)return null;if(node.id===id)return node;if(node.children)for(let child of node.children){const result=dfs(child,id);if(result)return result}return null}function walk(node,fn){if(fn(node),node.children)for(let child of node.children)walk(child,fn)}function focusNextElement(target){const elements=getFocusable(target);let next;for(let i=0;i<elements.length;++i){if(elements[i]===target){next=nextItem(elements,i);break}}null==next||next.focus()}function focusPrevElement(target){const elements=getFocusable(target);let next;for(let i=0;i<elements.length;++i){if(elements[i]===target){next=prevItem(elements,i);break}}null==next||next.focus()}function nextItem(list,index){return index+1<list.length?list[index+1]:list[0]}function prevItem(list,index){return index-1>=0?list[index-1]:list[list.length-1]}function getFocusable(target){return Array.from(document.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled]), details:not([disabled]), summary:not(:disabled)')).filter(e=>e===target||!target.contains(e))}function access(obj,accessor){return"boolean"==typeof accessor?accessor:"string"==typeof accessor?obj[accessor]:accessor(obj)}function identifyNull(obj){return null===obj?null:identify(obj)}function identify(obj){return"string"==typeof obj?obj:obj.id}function safeRun(fn,...args){if(fn)return fn(...args)}function waitFor(fn){return new Promise((resolve,reject)=>{let tries=0;!function check(){tries+=1,100===tries&&reject(),fn()?resolve():setTimeout(check,10)}()})}function getInsertIndex(tree){var _a,_b;const focus=tree.focusedNode;return focus?focus.isOpen?0:focus.parent?focus.childIndex+1:0:null!==(_b=null===(_a=tree.root.children)||void 0===_a?void 0:_a.length)&&void 0!==_b?_b:0}function getInsertParentId(tree){const focus=tree.focusedNode;return focus?focus.isOpen?focus.id:focus.parent&&!focus.parent.isRoot?focus.parent.id:null:null}const placeholderStyle={display:"flex",alignItems:"center",zIndex:1},lineStyle={flex:1,height:"2px",background:"#4B91E2",borderRadius:"1px"},circleStyle={width:"4px",height:"4px",boxShadow:"0 0 0 3px #4B91E2",borderRadius:"50%"},DefaultCursor=react.memo(function DefaultCursor({top,left,indent}){const style={position:"absolute",pointerEvents:"none",top:top-2+"px",left:left+"px",right:indent+"px"};return(0,jsx_runtime.jsxs)("div",{style:Object.assign(Object.assign({},placeholderStyle),style),children:[(0,jsx_runtime.jsx)("div",{style:Object.assign({},circleStyle)}),(0,jsx_runtime.jsx)("div",{style:Object.assign({},lineStyle)})]})});function DefaultRow({node,attrs,innerRef,children}){return(0,jsx_runtime.jsx)("div",Object.assign({},attrs,{ref:innerRef,onFocus:e=>e.stopPropagation(),onClick:node.handleClick,children}))}function DefaultNode(props){return(0,jsx_runtime.jsxs)("div",{ref:props.dragHandle,style:props.style,children:[(0,jsx_runtime.jsx)("span",{onClick:e=>{e.stopPropagation(),props.node.toggle()},children:props.node.isLeaf?"ðŸŒ³":props.node.isOpen?"ðŸ—":"ðŸ—€"})," ",props.node.isEditing?(0,jsx_runtime.jsx)(Edit,Object.assign({},props)):(0,jsx_runtime.jsx)(Show,Object.assign({},props))]})}function Show(props){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)("span",{children:props.node.data.name})})}function Edit({node}){const input=(0,react.useRef)();return(0,react.useEffect)(()=>{var _a,_b;null===(_a=input.current)||void 0===_a||_a.focus(),null===(_b=input.current)||void 0===_b||_b.select()},[]),(0,jsx_runtime.jsx)("input",{ref:input,defaultValue:node.data.name,onBlur:()=>node.reset(),onKeyDown:e=>{var _a;"Escape"===e.key&&node.reset(),"Enter"===e.key&&node.submit((null===(_a=input.current)||void 0===_a?void 0:_a.value)||"")}})}function edit(id){return{type:"EDIT",id}}function focus_slice_focus(id){return{type:"FOCUS",id}}class NodeApi{constructor(params){this.handleClick=e=>{e.metaKey&&!this.tree.props.disableMultiSelection?this.isSelected?this.deselect():this.selectMulti():e.shiftKey&&!this.tree.props.disableMultiSelection?this.selectContiguous():(this.select(),this.activate())},this.tree=params.tree,this.id=params.id,this.data=params.data,this.level=params.level,this.children=params.children,this.parent=params.parent,this.isDraggable=params.isDraggable,this.rowIndex=params.rowIndex}get isRoot(){return this.id===ROOT_ID}get isLeaf(){return!Array.isArray(this.children)}get isInternal(){return!this.isLeaf}get isOpen(){return!this.isLeaf&&this.tree.isOpen(this.id)}get isClosed(){return!this.isLeaf&&!this.tree.isOpen(this.id)}get isEditable(){return this.tree.isEditable(this.data)}get isEditing(){return this.tree.editingId===this.id}get isSelected(){return this.tree.isSelected(this.id)}get isOnlySelection(){return this.isSelected&&this.tree.hasOneSelection}get isSelectedStart(){var _a;return this.isSelected&&!(null===(_a=this.prev)||void 0===_a?void 0:_a.isSelected)}get isSelectedEnd(){var _a;return this.isSelected&&!(null===(_a=this.next)||void 0===_a?void 0:_a.isSelected)}get isFocused(){return this.tree.isFocused(this.id)}get isDragging(){return this.tree.isDragging(this.id)}get willReceiveDrop(){return this.tree.willReceiveDrop(this.id)}get state(){return{isClosed:this.isClosed,isDragging:this.isDragging,isEditing:this.isEditing,isFocused:this.isFocused,isInternal:this.isInternal,isLeaf:this.isLeaf,isOpen:this.isOpen,isSelected:this.isSelected,isSelectedEnd:this.isSelectedEnd,isSelectedStart:this.isSelectedStart,willReceiveDrop:this.willReceiveDrop}}get childIndex(){return this.parent&&this.parent.children?this.parent.children.findIndex(child=>child.id===this.id):-1}get next(){return null===this.rowIndex?null:this.tree.at(this.rowIndex+1)}get prev(){return null===this.rowIndex?null:this.tree.at(this.rowIndex-1)}get nextSibling(){var _a,_b;const i=this.childIndex;return null!==(_b=null===(_a=this.parent)||void 0===_a?void 0:_a.children[i+1])&&void 0!==_b?_b:null}isAncestorOf(node){if(!node)return!1;let ancestor=node;for(;ancestor;){if(ancestor.id===this.id)return!0;ancestor=ancestor.parent}return!1}select(){this.tree.select(this)}deselect(){this.tree.deselect(this)}selectMulti(){this.tree.selectMulti(this)}selectContiguous(){this.tree.selectContiguous(this)}activate(){this.tree.activate(this)}focus(){this.tree.focus(this)}toggle(){this.tree.toggle(this)}open(){this.tree.open(this)}openParents(){this.tree.openParents(this)}close(){this.tree.close(this)}submit(value){this.tree.submit(this,value)}reset(){this.tree.reset()}clone(){return new NodeApi(Object.assign({},this))}edit(){return this.tree.edit(this)}}const ROOT_ID="__REACT_ARBORIST_INTERNAL_ROOT__";function createRoot(tree){var _a;function visitSelfAndChildren(data,level,parent){const id=tree.accessId(data),node=new NodeApi({tree,data,level,parent,id,children:null,isDraggable:tree.isDraggable(data),rowIndex:null}),children=tree.accessChildren(data);return children&&(node.children=children.map(child=>visitSelfAndChildren(child,level+1,node))),node}const root=new NodeApi({tree,id:ROOT_ID,data:{id:ROOT_ID},level:-1,parent:null,children:null,isDraggable:!0,rowIndex:null}),data=null!==(_a=tree.props.data)&&void 0!==_a?_a:[];return root.children=data.map(child=>visitSelfAndChildren(child,0,root)),root}const actions={open:(id,filtered)=>({type:"VISIBILITY_OPEN",id,filtered}),close:(id,filtered)=>({type:"VISIBILITY_CLOSE",id,filtered}),toggle:(id,filtered)=>({type:"VISIBILITY_TOGGLE",id,filtered}),clear:filtered=>({type:"VISIBILITY_CLEAR",filtered})};function openMapReducer(state={},action){if("VISIBILITY_OPEN"===action.type)return Object.assign(Object.assign({},state),{[action.id]:!0});if("VISIBILITY_CLOSE"===action.type)return Object.assign(Object.assign({},state),{[action.id]:!1});if("VISIBILITY_TOGGLE"===action.type){const prev=state[action.id];return Object.assign(Object.assign({},state),{[action.id]:!prev})}return"VISIBILITY_CLEAR"===action.type?{}:state}const initialState=props=>{var _a;return{nodes:{open:{filtered:{},unfiltered:null!==(_a=null==props?void 0:props.initialOpenState)&&void 0!==_a?_a:{}},focus:{id:null,treeFocused:!1},edit:{id:null},drag:{id:null,selectedIds:[],destinationParentId:null,destinationIndex:null},selection:{ids:new Set,anchor:null,mostRecent:null}},dnd:{cursor:{type:"none"},dragId:null,dragIds:[],parentId:null,index:-1}}},selection_slice_actions_only=id=>({type:"SELECTION_ONLY",id:identify(id)}),selection_slice_actions_add=id=>({type:"SELECTION_ADD",ids:(Array.isArray(id)?id:[id]).map(identify)}),selection_slice_actions_remove=id=>({type:"SELECTION_REMOVE",ids:(Array.isArray(id)?id:[id]).map(identify)}),selection_slice_actions_set=args=>Object.assign({type:"SELECTION_SET"},args),selection_slice_actions_mostRecent=id=>({type:"SELECTION_MOST_RECENT",id:null===id?null:identify(id)}),selection_slice_actions_anchor=id=>({type:"SELECTION_ANCHOR",id:null===id?null:identify(id)});const dnd_slice_actions={cursor:cursor=>({type:"DND_CURSOR",cursor}),dragStart:(id,dragIds)=>({type:"DND_DRAG_START",id,dragIds}),dragEnd:()=>({type:"DND_DRAG_END"}),hovering:(parentId,index)=>({type:"DND_HOVERING",parentId,index})};const layerStyles={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"},getStyle=offset=>{if(!offset)return{display:"none"};const{x,y}=offset;return{transform:`translate(${x}px, ${y}px)`}},getCountStyle=offset=>{if(!offset)return{display:"none"};const{x,y}=offset;return{transform:`translate(${x+10}px, ${y+10}px)`}};function DefaultDragPreview({offset,mouse,id,dragIds,isDragging}){return(0,jsx_runtime.jsxs)(Overlay,{isDragging,children:[(0,jsx_runtime.jsx)(Position,{offset,children:(0,jsx_runtime.jsx)(PreviewNode,{id,dragIds})}),(0,jsx_runtime.jsx)(Count,{mouse,count:dragIds.length})]})}const Overlay=(0,react.memo)(function Overlay(props){return props.isDragging?(0,jsx_runtime.jsx)("div",{style:layerStyles,children:props.children}):null});function Position(props){return(0,jsx_runtime.jsx)("div",{className:"row preview",style:getStyle(props.offset),children:props.children})}function Count(props){const{count,mouse}=props;return count>1?(0,jsx_runtime.jsx)("div",{className:"selected-count",style:getCountStyle(mouse),children:count}):null}const PreviewNode=(0,react.memo)(function PreviewNode(props){const tree=useTreeApi(),node=tree.get(props.id);return node?(0,jsx_runtime.jsx)(tree.renderNode,{preview:!0,node,style:{paddingLeft:node.level*tree.indent,opacity:.2,background:"transparent"},tree}):null});var esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),assertThisInitialized=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),inheritsLoose=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),safeIsNaN=Number.isNaN||function ponyfill(value){return"number"==typeof value&&value!=value};function isEqual(first,second){return first===second||!(!safeIsNaN(first)||!safeIsNaN(second))}function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length)return!1;for(var i=0;i<newInputs.length;i++)if(!isEqual(newInputs[i],lastInputs[i]))return!1;return!0}const memoize_one_esm=function memoizeOne(resultFn,isEqual){var lastThis;void 0===isEqual&&(isEqual=areInputsEqual);var lastResult,lastArgs=[],calledOnce=!1;return function memoized(){for(var newArgs=[],_i=0;_i<arguments.length;_i++)newArgs[_i]=arguments[_i];return calledOnce&&lastThis===this&&isEqual(newArgs,lastArgs)||(lastResult=resultFn.apply(this,newArgs),calledOnce=!0,lastThis=this,lastArgs=newArgs),lastResult}};var now="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function cancelTimeout(timeoutID){cancelAnimationFrame(timeoutID.id)}function requestTimeout(callback,delay){var start=now();var timeoutID={id:requestAnimationFrame(function tick(){now()-start>=delay?callback.call(null):timeoutID.id=requestAnimationFrame(tick)})};return timeoutID}var size=-1;function getScrollbarSize(recalculate){if(void 0===recalculate&&(recalculate=!1),-1===size||recalculate){var div=document.createElement("div"),style=div.style;style.width="50px",style.height="50px",style.overflow="scroll",document.body.appendChild(div),size=div.offsetWidth-div.clientWidth,document.body.removeChild(div)}return size}var cachedRTLResult=null;function getRTLOffsetType(recalculate){if(void 0===recalculate&&(recalculate=!1),null===cachedRTLResult||recalculate){var outerDiv=document.createElement("div"),outerStyle=outerDiv.style;outerStyle.width="50px",outerStyle.height="50px",outerStyle.overflow="scroll",outerStyle.direction="rtl";var innerDiv=document.createElement("div"),innerStyle=innerDiv.style;return innerStyle.width="100px",innerStyle.height="100px",outerDiv.appendChild(innerDiv),document.body.appendChild(outerDiv),outerDiv.scrollLeft>0?cachedRTLResult="positive-descending":(outerDiv.scrollLeft=1,cachedRTLResult=0===outerDiv.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(outerDiv),cachedRTLResult}return cachedRTLResult}var defaultItemKey$1=function defaultItemKey(index,data){return index};function createListComponent(_ref){var _class,getItemOffset=_ref.getItemOffset,getEstimatedTotalSize=_ref.getEstimatedTotalSize,getItemSize=_ref.getItemSize,getOffsetForIndexAndAlignment=_ref.getOffsetForIndexAndAlignment,getStartIndexForOffset=_ref.getStartIndexForOffset,getStopIndexForStartIndex=_ref.getStopIndexForStartIndex,initInstanceProps=_ref.initInstanceProps,shouldResetStyleCacheOnItemSizeChange=_ref.shouldResetStyleCacheOnItemSizeChange,validateProps=_ref.validateProps;return _class=function(_PureComponent){function List(props){var _this;return(_this=_PureComponent.call(this,props)||this)._instanceProps=initInstanceProps(_this.props,(0,assertThisInitialized.A)(_this)),_this._outerRef=void 0,_this._resetIsScrollingTimeoutId=null,_this.state={instance:(0,assertThisInitialized.A)(_this),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof _this.props.initialScrollOffset?_this.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},_this._callOnItemsRendered=void 0,_this._callOnItemsRendered=memoize_one_esm(function(overscanStartIndex,overscanStopIndex,visibleStartIndex,visibleStopIndex){return _this.props.onItemsRendered({overscanStartIndex,overscanStopIndex,visibleStartIndex,visibleStopIndex})}),_this._callOnScroll=void 0,_this._callOnScroll=memoize_one_esm(function(scrollDirection,scrollOffset,scrollUpdateWasRequested){return _this.props.onScroll({scrollDirection,scrollOffset,scrollUpdateWasRequested})}),_this._getItemStyle=void 0,_this._getItemStyle=function(index){var style,_this$props=_this.props,direction=_this$props.direction,itemSize=_this$props.itemSize,layout=_this$props.layout,itemStyleCache=_this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange&&itemSize,shouldResetStyleCacheOnItemSizeChange&&layout,shouldResetStyleCacheOnItemSizeChange&&direction);if(itemStyleCache.hasOwnProperty(index))style=itemStyleCache[index];else{var _offset=getItemOffset(_this.props,index,_this._instanceProps),size=getItemSize(_this.props,index,_this._instanceProps),isHorizontal="horizontal"===direction||"horizontal"===layout,isRtl="rtl"===direction,offsetHorizontal=isHorizontal?_offset:0;itemStyleCache[index]=style={position:"absolute",left:isRtl?void 0:offsetHorizontal,right:isRtl?offsetHorizontal:void 0,top:isHorizontal?0:_offset,height:isHorizontal?"100%":size,width:isHorizontal?size:"100%"}}return style},_this._getItemStyleCache=void 0,_this._getItemStyleCache=memoize_one_esm(function(_,__,___){return{}}),_this._onScrollHorizontal=function(event){var _event$currentTarget=event.currentTarget,clientWidth=_event$currentTarget.clientWidth,scrollLeft=_event$currentTarget.scrollLeft,scrollWidth=_event$currentTarget.scrollWidth;_this.setState(function(prevState){if(prevState.scrollOffset===scrollLeft)return null;var direction=_this.props.direction,scrollOffset=scrollLeft;if("rtl"===direction)switch(getRTLOffsetType()){case"negative":scrollOffset=-scrollLeft;break;case"positive-descending":scrollOffset=scrollWidth-clientWidth-scrollLeft}return scrollOffset=Math.max(0,Math.min(scrollOffset,scrollWidth-clientWidth)),{isScrolling:!0,scrollDirection:prevState.scrollOffset<scrollOffset?"forward":"backward",scrollOffset,scrollUpdateWasRequested:!1}},_this._resetIsScrollingDebounced)},_this._onScrollVertical=function(event){var _event$currentTarget2=event.currentTarget,clientHeight=_event$currentTarget2.clientHeight,scrollHeight=_event$currentTarget2.scrollHeight,scrollTop=_event$currentTarget2.scrollTop;_this.setState(function(prevState){if(prevState.scrollOffset===scrollTop)return null;var scrollOffset=Math.max(0,Math.min(scrollTop,scrollHeight-clientHeight));return{isScrolling:!0,scrollDirection:prevState.scrollOffset<scrollOffset?"forward":"backward",scrollOffset,scrollUpdateWasRequested:!1}},_this._resetIsScrollingDebounced)},_this._outerRefSetter=function(ref){var outerRef=_this.props.outerRef;_this._outerRef=ref,"function"==typeof outerRef?outerRef(ref):null!=outerRef&&"object"==typeof outerRef&&outerRef.hasOwnProperty("current")&&(outerRef.current=ref)},_this._resetIsScrollingDebounced=function(){null!==_this._resetIsScrollingTimeoutId&&cancelTimeout(_this._resetIsScrollingTimeoutId),_this._resetIsScrollingTimeoutId=requestTimeout(_this._resetIsScrolling,150)},_this._resetIsScrolling=function(){_this._resetIsScrollingTimeoutId=null,_this.setState({isScrolling:!1},function(){_this._getItemStyleCache(-1,null)})},_this}(0,inheritsLoose.A)(List,_PureComponent),List.getDerivedStateFromProps=function getDerivedStateFromProps(nextProps,prevState){return validateSharedProps$1(nextProps,prevState),validateProps(nextProps),null};var _proto=List.prototype;return _proto.scrollTo=function scrollTo(scrollOffset){scrollOffset=Math.max(0,scrollOffset),this.setState(function(prevState){return prevState.scrollOffset===scrollOffset?null:{scrollDirection:prevState.scrollOffset<scrollOffset?"forward":"backward",scrollOffset,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},_proto.scrollToItem=function scrollToItem(index,align){void 0===align&&(align="auto");var _this$props2=this.props,itemCount=_this$props2.itemCount,layout=_this$props2.layout,scrollOffset=this.state.scrollOffset;index=Math.max(0,Math.min(index,itemCount-1));var scrollbarSize=0;if(this._outerRef){var outerRef=this._outerRef;scrollbarSize="vertical"===layout?outerRef.scrollWidth>outerRef.clientWidth?getScrollbarSize():0:outerRef.scrollHeight>outerRef.clientHeight?getScrollbarSize():0}this.scrollTo(getOffsetForIndexAndAlignment(this.props,index,align,scrollOffset,this._instanceProps,scrollbarSize))},_proto.componentDidMount=function componentDidMount(){var _this$props3=this.props,direction=_this$props3.direction,initialScrollOffset=_this$props3.initialScrollOffset,layout=_this$props3.layout;if("number"==typeof initialScrollOffset&&null!=this._outerRef){var outerRef=this._outerRef;"horizontal"===direction||"horizontal"===layout?outerRef.scrollLeft=initialScrollOffset:outerRef.scrollTop=initialScrollOffset}this._callPropsCallbacks()},_proto.componentDidUpdate=function componentDidUpdate(){var _this$props4=this.props,direction=_this$props4.direction,layout=_this$props4.layout,_this$state=this.state,scrollOffset=_this$state.scrollOffset;if(_this$state.scrollUpdateWasRequested&&null!=this._outerRef){var outerRef=this._outerRef;if("horizontal"===direction||"horizontal"===layout)if("rtl"===direction)switch(getRTLOffsetType()){case"negative":outerRef.scrollLeft=-scrollOffset;break;case"positive-ascending":outerRef.scrollLeft=scrollOffset;break;default:var clientWidth=outerRef.clientWidth,scrollWidth=outerRef.scrollWidth;outerRef.scrollLeft=scrollWidth-clientWidth-scrollOffset}else outerRef.scrollLeft=scrollOffset;else outerRef.scrollTop=scrollOffset}this._callPropsCallbacks()},_proto.componentWillUnmount=function componentWillUnmount(){null!==this._resetIsScrollingTimeoutId&&cancelTimeout(this._resetIsScrollingTimeoutId)},_proto.render=function render(){var _this$props5=this.props,children=_this$props5.children,className=_this$props5.className,direction=_this$props5.direction,height=_this$props5.height,innerRef=_this$props5.innerRef,innerElementType=_this$props5.innerElementType,innerTagName=_this$props5.innerTagName,itemCount=_this$props5.itemCount,itemData=_this$props5.itemData,_this$props5$itemKey=_this$props5.itemKey,itemKey=void 0===_this$props5$itemKey?defaultItemKey$1:_this$props5$itemKey,layout=_this$props5.layout,outerElementType=_this$props5.outerElementType,outerTagName=_this$props5.outerTagName,style=_this$props5.style,useIsScrolling=_this$props5.useIsScrolling,width=_this$props5.width,isScrolling=this.state.isScrolling,isHorizontal="horizontal"===direction||"horizontal"===layout,onScroll=isHorizontal?this._onScrollHorizontal:this._onScrollVertical,_this$_getRangeToRend=this._getRangeToRender(),startIndex=_this$_getRangeToRend[0],stopIndex=_this$_getRangeToRend[1],items=[];if(itemCount>0)for(var _index=startIndex;_index<=stopIndex;_index++)items.push((0,react.createElement)(children,{data:itemData,key:itemKey(_index,itemData),index:_index,isScrolling:useIsScrolling?isScrolling:void 0,style:this._getItemStyle(_index)}));var estimatedTotalSize=getEstimatedTotalSize(this.props,this._instanceProps);return(0,react.createElement)(outerElementType||outerTagName||"div",{className,onScroll,ref:this._outerRefSetter,style:(0,esm_extends.A)({position:"relative",height,width,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction},style)},(0,react.createElement)(innerElementType||innerTagName||"div",{children:items,ref:innerRef,style:{height:isHorizontal?"100%":estimatedTotalSize,pointerEvents:isScrolling?"none":void 0,width:isHorizontal?estimatedTotalSize:"100%"}}))},_proto._callPropsCallbacks=function _callPropsCallbacks(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var _this$_getRangeToRend2=this._getRangeToRender(),_overscanStartIndex=_this$_getRangeToRend2[0],_overscanStopIndex=_this$_getRangeToRend2[1],_visibleStartIndex=_this$_getRangeToRend2[2],_visibleStopIndex=_this$_getRangeToRend2[3];this._callOnItemsRendered(_overscanStartIndex,_overscanStopIndex,_visibleStartIndex,_visibleStopIndex)}if("function"==typeof this.props.onScroll){var _this$state2=this.state,_scrollDirection=_this$state2.scrollDirection,_scrollOffset=_this$state2.scrollOffset,_scrollUpdateWasRequested=_this$state2.scrollUpdateWasRequested;this._callOnScroll(_scrollDirection,_scrollOffset,_scrollUpdateWasRequested)}},_proto._getRangeToRender=function _getRangeToRender(){var _this$props6=this.props,itemCount=_this$props6.itemCount,overscanCount=_this$props6.overscanCount,_this$state3=this.state,isScrolling=_this$state3.isScrolling,scrollDirection=_this$state3.scrollDirection,scrollOffset=_this$state3.scrollOffset;if(0===itemCount)return[0,0,0,0];var startIndex=getStartIndexForOffset(this.props,scrollOffset,this._instanceProps),stopIndex=getStopIndexForStartIndex(this.props,startIndex,scrollOffset,this._instanceProps),overscanBackward=isScrolling&&"backward"!==scrollDirection?1:Math.max(1,overscanCount),overscanForward=isScrolling&&"forward"!==scrollDirection?1:Math.max(1,overscanCount);return[Math.max(0,startIndex-overscanBackward),Math.max(0,Math.min(itemCount-1,stopIndex+overscanForward)),startIndex,stopIndex]},List}(react.PureComponent),_class.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},_class}var validateSharedProps$1=function validateSharedProps(_ref2,_ref3){_ref2.children,_ref2.direction,_ref2.height,_ref2.layout,_ref2.innerTagName,_ref2.outerTagName,_ref2.width,_ref3.instance},FixedSizeList=createListComponent({getItemOffset:function getItemOffset(_ref,index){return index*_ref.itemSize},getItemSize:function getItemSize(_ref2,index){return _ref2.itemSize},getEstimatedTotalSize:function getEstimatedTotalSize(_ref3){var itemCount=_ref3.itemCount;return _ref3.itemSize*itemCount},getOffsetForIndexAndAlignment:function getOffsetForIndexAndAlignment(_ref4,index,align,scrollOffset,instanceProps,scrollbarSize){var direction=_ref4.direction,height=_ref4.height,itemCount=_ref4.itemCount,itemSize=_ref4.itemSize,layout=_ref4.layout,width=_ref4.width,size="horizontal"===direction||"horizontal"===layout?width:height,lastItemOffset=Math.max(0,itemCount*itemSize-size),maxOffset=Math.min(lastItemOffset,index*itemSize),minOffset=Math.max(0,index*itemSize-size+itemSize+scrollbarSize);switch("smart"===align&&(align=scrollOffset>=minOffset-size&&scrollOffset<=maxOffset+size?"auto":"center"),align){case"start":return maxOffset;case"end":return minOffset;case"center":var middleOffset=Math.round(minOffset+(maxOffset-minOffset)/2);return middleOffset<Math.ceil(size/2)?0:middleOffset>lastItemOffset+Math.floor(size/2)?lastItemOffset:middleOffset;default:return scrollOffset>=minOffset&&scrollOffset<=maxOffset?scrollOffset:scrollOffset<minOffset?minOffset:maxOffset}},getStartIndexForOffset:function getStartIndexForOffset(_ref5,offset){var itemCount=_ref5.itemCount,itemSize=_ref5.itemSize;return Math.max(0,Math.min(itemCount-1,Math.floor(offset/itemSize)))},getStopIndexForStartIndex:function getStopIndexForStartIndex(_ref6,startIndex,scrollOffset){var direction=_ref6.direction,height=_ref6.height,itemCount=_ref6.itemCount,itemSize=_ref6.itemSize,layout=_ref6.layout,width=_ref6.width,offset=startIndex*itemSize,size="horizontal"===direction||"horizontal"===layout?width:height,numVisibleItems=Math.ceil((size+scrollOffset-offset)/itemSize);return Math.max(0,Math.min(itemCount-1,startIndex+numVisibleItems-1))},initInstanceProps:function initInstanceProps(props){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function validateProps(_ref7){_ref7.itemSize}});function Cursor(){var _a,_b;const tree=useTreeApi(),cursor=function useDndContext(){const value=(0,react.useContext)(DndContext);if(null===value)throw new Error("Provide a DnDContext");return value}().cursor;if(!cursor||"line"!==cursor.type)return null;const indent=tree.indent,top=tree.rowHeight*cursor.index+(null!==(_b=null!==(_a=tree.props.padding)&&void 0!==_a?_a:tree.props.paddingTop)&&void 0!==_b?_b:0),left=indent*cursor.level,Cursor=tree.renderCursor;return(0,jsx_runtime.jsx)(Cursor,{top,left,indent})}var __rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const ListOuterElement=(0,react.forwardRef)(function Outer(props,ref){const{children}=props,rest=__rest(props,["children"]),tree=useTreeApi();return(0,jsx_runtime.jsxs)("div",Object.assign({ref},rest,{onClick:e=>{e.currentTarget===e.target&&tree.deselectAll()},children:[(0,jsx_runtime.jsx)(DropContainer,{}),children]}))}),DropContainer=()=>{const tree=useTreeApi();return(0,jsx_runtime.jsx)("div",{style:{height:tree.visibleNodes.length*tree.rowHeight,width:"100%",position:"absolute",left:"0",right:"0"},children:(0,jsx_runtime.jsx)(Cursor,{})})};var list_inner_element_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const ListInnerElement=(0,react.forwardRef)(function InnerElement(_a,ref){var _b,_c,_d,_e,{style}=_a,rest=list_inner_element_rest(_a,["style"]);const tree=useTreeApi(),paddingTop=null!==(_c=null!==(_b=tree.props.padding)&&void 0!==_b?_b:tree.props.paddingTop)&&void 0!==_c?_c:0,paddingBottom=null!==(_e=null!==(_d=tree.props.padding)&&void 0!==_d?_d:tree.props.paddingBottom)&&void 0!==_e?_e:0;return(0,jsx_runtime.jsx)("div",Object.assign({ref,style:Object.assign(Object.assign({},style),{height:`${parseFloat(style.height)+paddingTop+paddingBottom}px`})},rest))});var useIsomorphicLayoutEffect="undefined"!=typeof window?react.useLayoutEffect:react.useEffect;function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var DragSourceImpl=function(){function DragSourceImpl(spec,monitor,connector){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DragSourceImpl),_defineProperty(this,"spec",void 0),_defineProperty(this,"monitor",void 0),_defineProperty(this,"connector",void 0),this.spec=spec,this.monitor=monitor,this.connector=connector}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DragSourceImpl,[{key:"beginDrag",value:function beginDrag(){var _result,spec=this.spec,monitor=this.monitor;return null!==(_result="object"===_typeof(spec.item)?spec.item:"function"==typeof spec.item?spec.item(monitor):{})&&void 0!==_result?_result:null}},{key:"canDrag",value:function canDrag(){var spec=this.spec,monitor=this.monitor;return"boolean"==typeof spec.canDrag?spec.canDrag:"function"!=typeof spec.canDrag||spec.canDrag(monitor)}},{key:"isDragging",value:function isDragging(globalMonitor,target){var spec=this.spec,monitor=this.monitor,isDragging=spec.isDragging;return isDragging?isDragging(monitor):target===globalMonitor.getSourceId()}},{key:"endDrag",value:function endDrag(){var spec=this.spec,monitor=this.monitor,connector=this.connector,end=spec.end;end&&end(monitor.getItem(),monitor),connector.reconnect()}}]),DragSourceImpl}();function invariant(condition,format){for(var _len=arguments.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)args[_key-2]=arguments[_key];if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var argIndex=0;(error=new Error(format.replace(/%s/g,function(){return args[argIndex++]}))).name="Invariant Violation"}throw error.framesToPop=1,error}}var DndContext_DndContext=(0,react.createContext)({dragDropManager:void 0});function useDragDropManager(){var dragDropManager=(0,react.useContext)(DndContext_DndContext).dragDropManager;return invariant(null!=dragDropManager,"Expected drag drop context"),dragDropManager}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useRegisteredDragSource(spec,monitor,connector){var manager=useDragDropManager(),handler=function useDragSource(spec,monitor,connector){var handler=(0,react.useMemo)(function(){return new DragSourceImpl(spec,monitor,connector)},[monitor,connector]);return(0,react.useEffect)(function(){handler.spec=spec},[spec]),handler}(spec,monitor,connector),itemType=function useDragType(spec){return(0,react.useMemo)(function(){var result=spec.type;return invariant(null!=result,"spec.type must be defined"),result},[spec])}(spec);useIsomorphicLayoutEffect(function registerDragSource(){if(null!=itemType){var _registerSource=function registerSource(type,source,manager){var registry=manager.getRegistry(),sourceId=registry.addSource(type,source);return[sourceId,function(){return registry.removeSource(sourceId)}]}(itemType,handler,manager),_registerSource2=_slicedToArray(_registerSource,2),handlerId=_registerSource2[0],unregister=_registerSource2[1];return monitor.receiveHandlerId(handlerId),connector.receiveHandlerId(handlerId),unregister}},[manager,monitor,connector,handler,itemType])}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return useOptionalFactory_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function useOptionalFactory_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useOptionalFactory_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useOptionalFactory_arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useOptionalFactory_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useOptionalFactory(arg,deps){var memoDeps=_toConsumableArray(deps||[]);return null==deps&&"function"!=typeof arg&&memoDeps.push(arg),(0,react.useMemo)(function(){return"function"==typeof arg?arg():arg},memoDeps)}function DragSourceMonitorImpl_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DragSourceMonitorImpl_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var isCallingCanDrag=!1,isCallingIsDragging=!1,DragSourceMonitorImpl=function(){function DragSourceMonitorImpl(manager){!function DragSourceMonitorImpl_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DragSourceMonitorImpl),DragSourceMonitorImpl_defineProperty(this,"internalMonitor",void 0),DragSourceMonitorImpl_defineProperty(this,"sourceId",null),this.internalMonitor=manager.getMonitor()}return function DragSourceMonitorImpl_createClass(Constructor,protoProps,staticProps){return protoProps&&DragSourceMonitorImpl_defineProperties(Constructor.prototype,protoProps),staticProps&&DragSourceMonitorImpl_defineProperties(Constructor,staticProps),Constructor}(DragSourceMonitorImpl,[{key:"receiveHandlerId",value:function receiveHandlerId(sourceId){this.sourceId=sourceId}},{key:"getHandlerId",value:function getHandlerId(){return this.sourceId}},{key:"canDrag",value:function canDrag(){invariant(!isCallingCanDrag,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return isCallingCanDrag=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{isCallingCanDrag=!1}}},{key:"isDragging",value:function isDragging(){if(!this.sourceId)return!1;invariant(!isCallingIsDragging,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return isCallingIsDragging=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{isCallingIsDragging=!1}}},{key:"subscribeToStateChange",value:function subscribeToStateChange(listener,options){return this.internalMonitor.subscribeToStateChange(listener,options)}},{key:"isDraggingSource",value:function isDraggingSource(sourceId){return this.internalMonitor.isDraggingSource(sourceId)}},{key:"isOverTarget",value:function isOverTarget(targetId,options){return this.internalMonitor.isOverTarget(targetId,options)}},{key:"getTargetIds",value:function getTargetIds(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function isSourcePublic(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function getSourceId(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function subscribeToOffsetChange(listener){return this.internalMonitor.subscribeToOffsetChange(listener)}},{key:"canDragSource",value:function canDragSource(sourceId){return this.internalMonitor.canDragSource(sourceId)}},{key:"canDropOnTarget",value:function canDropOnTarget(targetId){return this.internalMonitor.canDropOnTarget(targetId)}},{key:"getItemType",value:function getItemType(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function getItem(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function getDropResult(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function didDrop(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function getClientOffset(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),DragSourceMonitorImpl}();function wrapHookToRecognizeElement(hook){return function(){var elementOrNode=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,react.isValidElement)(elementOrNode)){var node=elementOrNode;return hook(node,options),node}var element=elementOrNode;!function throwIfCompositeComponentElement(element){if("string"!=typeof element.type){var displayName=element.type.displayName||element.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(displayName," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}(element);var ref=options?function(node){return hook(node,options)}:hook;return function cloneWithRef(element,newRef){var previousRef=element.ref;return invariant("string"!=typeof previousRef,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),previousRef?(0,react.cloneElement)(element,{ref:function ref(node){setRef(previousRef,node),setRef(newRef,node)}}):(0,react.cloneElement)(element,{ref:newRef})}(element,ref)}}function wrapConnectorHooks(hooks){var wrappedHooks={};return Object.keys(hooks).forEach(function(key){var hook=hooks[key];if(key.endsWith("Ref"))wrappedHooks[key]=hooks[key];else{var wrappedHook=wrapHookToRecognizeElement(hook);wrappedHooks[key]=function(){return wrappedHook}}}),wrappedHooks}function setRef(ref,node){"function"==typeof ref?ref(node):ref.current=node}function isRef_typeof(obj){return isRef_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},isRef_typeof(obj)}function isRef(obj){return null!==obj&&"object"===isRef_typeof(obj)&&Object.prototype.hasOwnProperty.call(obj,"current")}function shallowEqual(objA,objB,compare,compareContext){var compareResult=compare?compare.call(compareContext,objA,objB):void 0;if(void 0!==compareResult)return!!compareResult;if(objA===objB)return!0;if("object"!=typeof objA||!objA||"object"!=typeof objB||!objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var bHasOwnProperty=Object.prototype.hasOwnProperty.bind(objB),idx=0;idx<keysA.length;idx++){var key=keysA[idx];if(!bHasOwnProperty(key))return!1;var valueA=objA[key],valueB=objB[key];if(!1===(compareResult=compare?compare.call(compareContext,valueA,valueB,key):void 0)||void 0===compareResult&&valueA!==valueB)return!1}return!0}function SourceConnector_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function SourceConnector_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var SourceConnector=function(){function SourceConnector(backend){var _this=this;!function SourceConnector_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SourceConnector),SourceConnector_defineProperty(this,"hooks",wrapConnectorHooks({dragSource:function dragSource(node,options){_this.clearDragSource(),_this.dragSourceOptions=options||null,isRef(node)?_this.dragSourceRef=node:_this.dragSourceNode=node,_this.reconnectDragSource()},dragPreview:function dragPreview(node,options){_this.clearDragPreview(),_this.dragPreviewOptions=options||null,isRef(node)?_this.dragPreviewRef=node:_this.dragPreviewNode=node,_this.reconnectDragPreview()}})),SourceConnector_defineProperty(this,"handlerId",null),SourceConnector_defineProperty(this,"dragSourceRef",null),SourceConnector_defineProperty(this,"dragSourceNode",void 0),SourceConnector_defineProperty(this,"dragSourceOptionsInternal",null),SourceConnector_defineProperty(this,"dragSourceUnsubscribe",void 0),SourceConnector_defineProperty(this,"dragPreviewRef",null),SourceConnector_defineProperty(this,"dragPreviewNode",void 0),SourceConnector_defineProperty(this,"dragPreviewOptionsInternal",null),SourceConnector_defineProperty(this,"dragPreviewUnsubscribe",void 0),SourceConnector_defineProperty(this,"lastConnectedHandlerId",null),SourceConnector_defineProperty(this,"lastConnectedDragSource",null),SourceConnector_defineProperty(this,"lastConnectedDragSourceOptions",null),SourceConnector_defineProperty(this,"lastConnectedDragPreview",null),SourceConnector_defineProperty(this,"lastConnectedDragPreviewOptions",null),SourceConnector_defineProperty(this,"backend",void 0),this.backend=backend}return function SourceConnector_createClass(Constructor,protoProps,staticProps){return protoProps&&SourceConnector_defineProperties(Constructor.prototype,protoProps),staticProps&&SourceConnector_defineProperties(Constructor,staticProps),Constructor}(SourceConnector,[{key:"receiveHandlerId",value:function receiveHandlerId(newHandlerId){this.handlerId!==newHandlerId&&(this.handlerId=newHandlerId,this.reconnect())}},{key:"connectTarget",get:function get(){return this.dragSource}},{key:"dragSourceOptions",get:function get(){return this.dragSourceOptionsInternal},set:function set(options){this.dragSourceOptionsInternal=options}},{key:"dragPreviewOptions",get:function get(){return this.dragPreviewOptionsInternal},set:function set(options){this.dragPreviewOptionsInternal=options}},{key:"reconnect",value:function reconnect(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function reconnectDragSource(){var dragSource=this.dragSource,didChange=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();didChange&&this.disconnectDragSource(),this.handlerId&&(dragSource?didChange&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=dragSource,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,dragSource,this.dragSourceOptions)):this.lastConnectedDragSource=dragSource)}},{key:"reconnectDragPreview",value:function reconnectDragPreview(){var dragPreview=this.dragPreview,didChange=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();didChange&&this.disconnectDragPreview(),this.handlerId&&(dragPreview?didChange&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=dragPreview,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,dragPreview,this.dragPreviewOptions)):this.lastConnectedDragPreview=dragPreview)}},{key:"didHandlerIdChange",value:function didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function didDragSourceOptionsChange(){return!shallowEqual(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function didDragPreviewOptionsChange(){return!shallowEqual(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function get(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function get(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),SourceConnector}();var emptyImage,fast_deep_equal=__webpack_require__("./node_modules/fast-deep-equal/index.js"),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal);function useCollector_slicedToArray(arr,i){return function useCollector_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useCollector_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function useCollector_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useCollector_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useCollector_arrayLikeToArray(o,minLen)}(arr,i)||function useCollector_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useCollector_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useCollector(monitor,collect,onUpdate){var _useState2=useCollector_slicedToArray((0,react.useState)(function(){return collect(monitor)}),2),collected=_useState2[0],setCollected=_useState2[1],updateCollected=(0,react.useCallback)(function(){var nextValue=collect(monitor);fast_deep_equal_default()(collected,nextValue)||(setCollected(nextValue),onUpdate&&onUpdate())},[collected,monitor,onUpdate]);return useIsomorphicLayoutEffect(updateCollected),[collected,updateCollected]}function useMonitorOutput_slicedToArray(arr,i){return function useMonitorOutput_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useMonitorOutput_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function useMonitorOutput_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useMonitorOutput_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useMonitorOutput_arrayLikeToArray(o,minLen)}(arr,i)||function useMonitorOutput_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useMonitorOutput_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useCollectedProps(collector,monitor,connector){return function useMonitorOutput(monitor,collect,onCollect){var _useCollector2=useMonitorOutput_slicedToArray(useCollector(monitor,collect,onCollect),2),collected=_useCollector2[0],updateCollected=_useCollector2[1];return useIsomorphicLayoutEffect(function subscribeToMonitorStateChange(){var handlerId=monitor.getHandlerId();if(null!=handlerId)return monitor.subscribeToStateChange(updateCollected,{handlerIds:[handlerId]})},[monitor,updateCollected]),collected}(monitor,collector||function(){return{}},function(){return connector.reconnect()})}function useConnectDragSource(connector){return(0,react.useMemo)(function(){return connector.hooks.dragSource()},[connector])}function useConnectDragPreview(connector){return(0,react.useMemo)(function(){return connector.hooks.dragPreview()},[connector])}function useDrag(specArg,deps){var spec=useOptionalFactory(specArg,deps);invariant(!spec.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var monitor=function useDragSourceMonitor(){var manager=useDragDropManager();return(0,react.useMemo)(function(){return new DragSourceMonitorImpl(manager)},[manager])}(),connector=function useDragSourceConnector(dragSourceOptions,dragPreviewOptions){var manager=useDragDropManager(),connector=(0,react.useMemo)(function(){return new SourceConnector(manager.getBackend())},[manager]);return useIsomorphicLayoutEffect(function(){return connector.dragSourceOptions=dragSourceOptions||null,connector.reconnect(),function(){return connector.disconnectDragSource()}},[connector,dragSourceOptions]),useIsomorphicLayoutEffect(function(){return connector.dragPreviewOptions=dragPreviewOptions||null,connector.reconnect(),function(){return connector.disconnectDragPreview()}},[connector,dragPreviewOptions]),connector}(spec.options,spec.previewOptions);return useRegisteredDragSource(spec,monitor,connector),[useCollectedProps(spec.collect,monitor,connector),useConnectDragSource(connector),useConnectDragPreview(connector)]}function useDragHook(node){const tree=useTreeApi(),ids=tree.selectedIds,[_,ref,preview]=useDrag(()=>({canDrag:()=>node.isDraggable,type:"NODE",item:()=>{const dragIds=tree.isSelected(node.id)?Array.from(ids):[node.id];return tree.dispatch(dnd_slice_actions.dragStart(node.id,dragIds)),{id:node.id,dragIds}},end:()=>{tree.hideCursor(),tree.dispatch(dnd_slice_actions.dragEnd())}}),[ids,node]);return(0,react.useEffect)(()=>{preview(function getEmptyImage(){return emptyImage||((emptyImage=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),emptyImage}())},[preview]),ref}function DropTargetImpl_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DropTargetImpl_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var DropTargetImpl=function(){function DropTargetImpl(spec,monitor){!function DropTargetImpl_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DropTargetImpl),DropTargetImpl_defineProperty(this,"spec",void 0),DropTargetImpl_defineProperty(this,"monitor",void 0),this.spec=spec,this.monitor=monitor}return function DropTargetImpl_createClass(Constructor,protoProps,staticProps){return protoProps&&DropTargetImpl_defineProperties(Constructor.prototype,protoProps),staticProps&&DropTargetImpl_defineProperties(Constructor,staticProps),Constructor}(DropTargetImpl,[{key:"canDrop",value:function canDrop(){var spec=this.spec,monitor=this.monitor;return!spec.canDrop||spec.canDrop(monitor.getItem(),monitor)}},{key:"hover",value:function hover(){var spec=this.spec,monitor=this.monitor;spec.hover&&spec.hover(monitor.getItem(),monitor)}},{key:"drop",value:function drop(){var spec=this.spec,monitor=this.monitor;if(spec.drop)return spec.drop(monitor.getItem(),monitor)}}]),DropTargetImpl}();function useRegisteredDropTarget_slicedToArray(arr,i){return function useRegisteredDropTarget_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useRegisteredDropTarget_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function useRegisteredDropTarget_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useRegisteredDropTarget_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useRegisteredDropTarget_arrayLikeToArray(o,minLen)}(arr,i)||function useRegisteredDropTarget_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useRegisteredDropTarget_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useRegisteredDropTarget(spec,monitor,connector){var manager=useDragDropManager(),dropTarget=function useDropTarget(spec,monitor){var dropTarget=(0,react.useMemo)(function(){return new DropTargetImpl(spec,monitor)},[monitor]);return(0,react.useEffect)(function(){dropTarget.spec=spec},[spec]),dropTarget}(spec,monitor),accept=function useAccept(spec){var accept=spec.accept;return(0,react.useMemo)(function(){return invariant(null!=spec.accept,"accept must be defined"),Array.isArray(accept)?accept:[accept]},[accept])}(spec);useIsomorphicLayoutEffect(function registerDropTarget(){var _registerTarget=function registerTarget(type,target,manager){var registry=manager.getRegistry(),targetId=registry.addTarget(type,target);return[targetId,function(){return registry.removeTarget(targetId)}]}(accept,dropTarget,manager),_registerTarget2=useRegisteredDropTarget_slicedToArray(_registerTarget,2),handlerId=_registerTarget2[0],unregister=_registerTarget2[1];return monitor.receiveHandlerId(handlerId),connector.receiveHandlerId(handlerId),unregister},[manager,monitor,dropTarget,connector,accept.map(function(a){return a.toString()}).join("|")])}function DropTargetMonitorImpl_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DropTargetMonitorImpl_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var isCallingCanDrop=!1,DropTargetMonitorImpl=function(){function DropTargetMonitorImpl(manager){!function DropTargetMonitorImpl_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DropTargetMonitorImpl),DropTargetMonitorImpl_defineProperty(this,"internalMonitor",void 0),DropTargetMonitorImpl_defineProperty(this,"targetId",null),this.internalMonitor=manager.getMonitor()}return function DropTargetMonitorImpl_createClass(Constructor,protoProps,staticProps){return protoProps&&DropTargetMonitorImpl_defineProperties(Constructor.prototype,protoProps),staticProps&&DropTargetMonitorImpl_defineProperties(Constructor,staticProps),Constructor}(DropTargetMonitorImpl,[{key:"receiveHandlerId",value:function receiveHandlerId(targetId){this.targetId=targetId}},{key:"getHandlerId",value:function getHandlerId(){return this.targetId}},{key:"subscribeToStateChange",value:function subscribeToStateChange(listener,options){return this.internalMonitor.subscribeToStateChange(listener,options)}},{key:"canDrop",value:function canDrop(){if(!this.targetId)return!1;invariant(!isCallingCanDrop,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return isCallingCanDrop=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{isCallingCanDrop=!1}}},{key:"isOver",value:function isOver(options){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,options)}},{key:"getItemType",value:function getItemType(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function getItem(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function getDropResult(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function didDrop(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function getClientOffset(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),DropTargetMonitorImpl}();function TargetConnector_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function TargetConnector_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var TargetConnector=function(){function TargetConnector(backend){var _this=this;!function TargetConnector_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TargetConnector),TargetConnector_defineProperty(this,"hooks",wrapConnectorHooks({dropTarget:function dropTarget(node,options){_this.clearDropTarget(),_this.dropTargetOptions=options,isRef(node)?_this.dropTargetRef=node:_this.dropTargetNode=node,_this.reconnect()}})),TargetConnector_defineProperty(this,"handlerId",null),TargetConnector_defineProperty(this,"dropTargetRef",null),TargetConnector_defineProperty(this,"dropTargetNode",void 0),TargetConnector_defineProperty(this,"dropTargetOptionsInternal",null),TargetConnector_defineProperty(this,"unsubscribeDropTarget",void 0),TargetConnector_defineProperty(this,"lastConnectedHandlerId",null),TargetConnector_defineProperty(this,"lastConnectedDropTarget",null),TargetConnector_defineProperty(this,"lastConnectedDropTargetOptions",null),TargetConnector_defineProperty(this,"backend",void 0),this.backend=backend}return function TargetConnector_createClass(Constructor,protoProps,staticProps){return protoProps&&TargetConnector_defineProperties(Constructor.prototype,protoProps),staticProps&&TargetConnector_defineProperties(Constructor,staticProps),Constructor}(TargetConnector,[{key:"connectTarget",get:function get(){return this.dropTarget}},{key:"reconnect",value:function reconnect(){var didChange=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();didChange&&this.disconnectDropTarget();var dropTarget=this.dropTarget;this.handlerId&&(dropTarget?didChange&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=dropTarget,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,dropTarget,this.dropTargetOptions)):this.lastConnectedDropTarget=dropTarget)}},{key:"receiveHandlerId",value:function receiveHandlerId(newHandlerId){newHandlerId!==this.handlerId&&(this.handlerId=newHandlerId,this.reconnect())}},{key:"dropTargetOptions",get:function get(){return this.dropTargetOptionsInternal},set:function set(options){this.dropTargetOptionsInternal=options}},{key:"didHandlerIdChange",value:function didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function didOptionsChange(){return!shallowEqual(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function get(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}}]),TargetConnector}();function useConnectDropTarget(connector){return(0,react.useMemo)(function(){return connector.hooks.dropTarget()},[connector])}function useDrop(specArg,deps){var spec=useOptionalFactory(specArg,deps),monitor=function useDropTargetMonitor(){var manager=useDragDropManager();return(0,react.useMemo)(function(){return new DropTargetMonitorImpl(manager)},[manager])}(),connector=function useDropTargetConnector(options){var manager=useDragDropManager(),connector=(0,react.useMemo)(function(){return new TargetConnector(manager.getBackend())},[manager]);return useIsomorphicLayoutEffect(function(){return connector.dropTargetOptions=options||null,connector.reconnect(),function(){return connector.disconnectDropTarget()}},[options]),connector}(spec.options);return useRegisteredDropTarget(spec,monitor,connector),[useCollectedProps(spec.collect,monitor,connector),useConnectDropTarget(connector)]}function dropAt(parentId,index){return{parentId:parentId||null,index}}function lineCursor(index,level){return{type:"line",index,level}}function walkUpFrom(node,level){var _a;let drop=node;for(;drop.parent&&drop.level>level;)drop=drop.parent;return{parentId:(null===(_a=drop.parent)||void 0===_a?void 0:_a.id)||null,index:indexOf(drop)+1}}function computeDrop(args){var _a;const hover=function measureHover(el,offset){const rect=el.getBoundingClientRect(),x=offset.x-Math.round(rect.x),y=offset.y-Math.round(rect.y),height=rect.height,inTopHalf=y<height/2,inBottomHalf=!inTopHalf,pad=height/4,inMiddle=y>pad&&y<height-pad;return{x,inTopHalf,inBottomHalf,inMiddle,atTop:!inMiddle&&inTopHalf,atBottom:!inMiddle&&inBottomHalf}}(args.element,args.offset),indent=args.indent,hoverLevel=Math.round(Math.max(0,hover.x-indent)/indent),{node,nextNode,prevNode}=args,[above,below]=function getNodesAroundCursor(node,prev,next,hover){return node?node.isInternal?hover.atTop?[prev,node]:hover.inMiddle?[node,node]:[node,next]:hover.inTopHalf?[prev,node]:[node,next]:[prev,null]}(node,prevNode,nextNode,hover);if(node&&node.isInternal&&hover.inMiddle)return{drop:dropAt(node.id,null),cursor:(id=node.id,{type:"highlight",id})};var id;if(!above)return{drop:dropAt(null===(_a=null==below?void 0:below.parent)||void 0===_a?void 0:_a.id,0),cursor:lineCursor(0,0)};if(isItem(above)){const level=bound(hoverLevel,(null==below?void 0:below.level)||0,above.level);return{drop:walkUpFrom(above,level),cursor:lineCursor(above.rowIndex+1,level)}}if(isClosed(above)){const level=bound(hoverLevel,(null==below?void 0:below.level)||0,above.level);return{drop:walkUpFrom(above,level),cursor:lineCursor(above.rowIndex+1,level)}}if(isOpenWithEmptyChildren(above)){const level=bound(hoverLevel,0,above.level+1);return level>above.level?{drop:dropAt(above.id,0),cursor:lineCursor(above.rowIndex+1,level)}:{drop:walkUpFrom(above,level),cursor:lineCursor(above.rowIndex+1,level)}}return{drop:dropAt(null==above?void 0:above.id,0),cursor:lineCursor(above.rowIndex+1,above.level+1)}}const RowContainer=react.memo(function RowContainer({index,style}){useDataUpdates();(function useNodesContext(){const value=(0,react.useContext)(NodesContext);if(null===value)throw new Error("Provide a NodesContext");return value})();const tree=useTreeApi(),node=function useFreshNode(index){const tree=useTreeApi(),original=tree.at(index);if(!original)throw new Error(`Could not find node for index: ${index}`);return(0,react.useMemo)(()=>{const fresh=original.clone();return tree.visibleNodes[index]=fresh,fresh},[...Object.values(original.state),original])}(index),el=(0,react.useRef)(null),dragRef=useDragHook(node),dropRef=function useDropHook(el,node){const tree=useTreeApi(),[_,dropRef]=useDrop(()=>({accept:"NODE",canDrop:()=>tree.canDrop(),hover:(_item,m)=>{const offset=m.getClientOffset();if(!el.current||!offset)return;const{cursor,drop}=computeDrop({element:el.current,offset,indent:tree.indent,node,prevNode:node.prev,nextNode:node.next});drop&&tree.dispatch(dnd_slice_actions.hovering(drop.parentId,drop.index)),m.canDrop()?cursor&&tree.showCursor(cursor):tree.hideCursor()},drop:(_,m)=>{if(!m.canDrop())return null;let{parentId,index,dragIds}=tree.state.dnd;safeRun(tree.props.onMove,{dragIds,parentId:parentId===ROOT_ID?null:parentId,index:null===index?0:index,dragNodes:tree.dragNodes,parentNode:tree.get(parentId)}),tree.open(parentId)}}),[node,el.current,tree.props]);return dropRef}(el,node),innerRef=(0,react.useCallback)(n=>{el.current=n,dropRef(n)},[dropRef]),indent=tree.indent*node.level,nodeStyle=(0,react.useMemo)(()=>({paddingLeft:indent}),[indent]),rowStyle=(0,react.useMemo)(()=>{var _a,_b;return Object.assign(Object.assign({},style),{top:parseFloat(style.top)+(null!==(_b=null!==(_a=tree.props.padding)&&void 0!==_a?_a:tree.props.paddingTop)&&void 0!==_b?_b:0)})},[style,tree.props.padding,tree.props.paddingTop]),rowAttrs={role:"treeitem","aria-level":node.level+1,"aria-selected":node.isSelected,"aria-expanded":node.isOpen,style:rowStyle,tabIndex:-1,className:tree.props.rowClassName};(0,react.useEffect)(()=>{var _a;!node.isEditing&&node.isFocused&&(null===(_a=el.current)||void 0===_a||_a.focus({preventScroll:!0}))},[node.isEditing,node.isFocused,el.current]);const Node=tree.renderNode,Row=tree.renderRow;return(0,jsx_runtime.jsx)(Row,{node,innerRef,attrs:rowAttrs,children:(0,jsx_runtime.jsx)(Node,{node,tree,style:nodeStyle,dragHandle:dragRef})})});let focusSearchTerm="",timeoutId=null;function DefaultContainer(){useDataUpdates();const tree=useTreeApi();return(0,jsx_runtime.jsx)("div",{role:"tree",style:{height:tree.height,width:tree.width,minHeight:0,minWidth:0},onContextMenu:tree.props.onContextMenu,onClick:tree.props.onClick,tabIndex:0,onFocus:e=>{e.currentTarget.contains(e.relatedTarget)||tree.onFocus()},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||tree.onBlur()},onKeyDown:e=>{var _a;if(tree.isEditing)return;if("Backspace"===e.key){if(!tree.props.onDelete)return;const ids=Array.from(tree.selectedIds);if(ids.length>1){let nextFocus=tree.mostRecentNode;for(;nextFocus&&nextFocus.isSelected;)nextFocus=nextFocus.nextSibling;nextFocus||(nextFocus=tree.lastNode),tree.focus(nextFocus,{scroll:!1}),tree.delete(Array.from(ids))}else{const node=tree.focusedNode;if(node){const sib=node.nextSibling,parent=node.parent;tree.focus(sib||parent,{scroll:!1}),tree.delete(node)}}return}if("Tab"===e.key&&!e.shiftKey)return e.preventDefault(),void focusNextElement(e.currentTarget);if("Tab"===e.key&&e.shiftKey)return e.preventDefault(),void focusPrevElement(e.currentTarget);if("ArrowDown"===e.key){e.preventDefault();const next=tree.nextNode;if(e.metaKey)return tree.select(tree.focusedNode),void tree.activate(tree.focusedNode);if(!e.shiftKey||tree.props.disableMultiSelection)return void tree.focus(next);{if(!next)return;const current=tree.focusedNode;return void(current?current.isSelected?tree.selectContiguous(next):tree.selectMulti(next):tree.focus(tree.firstNode))}}if("ArrowUp"===e.key){e.preventDefault();const prev=tree.prevNode;if(!e.shiftKey||tree.props.disableMultiSelection)return void tree.focus(prev);{if(!prev)return;const current=tree.focusedNode;return void(current?current.isSelected?tree.selectContiguous(prev):tree.selectMulti(prev):tree.focus(tree.lastNode))}}if("ArrowRight"===e.key){const node=tree.focusedNode;if(!node)return;return void(node.isInternal&&node.isOpen?tree.focus(tree.nextNode):node.isInternal&&tree.open(node.id))}if("ArrowLeft"===e.key){const node=tree.focusedNode;if(!node||node.isRoot)return;return void(node.isInternal&&node.isOpen?tree.close(node.id):(null===(_a=node.parent)||void 0===_a?void 0:_a.isRoot)||tree.focus(node.parent))}if("a"===e.key&&e.metaKey&&!tree.props.disableMultiSelection)return e.preventDefault(),void tree.selectAll();if("a"===e.key&&!e.metaKey&&tree.props.onCreate)return void tree.createLeaf();if("A"===e.key&&!e.metaKey){if(!tree.props.onCreate)return;return void tree.createInternal()}if("Home"===e.key)return e.preventDefault(),void tree.focus(tree.firstNode);if("End"===e.key)return e.preventDefault(),void tree.focus(tree.lastNode);if("Enter"===e.key){const node=tree.focusedNode;if(!node)return;if(!node.isEditable||!tree.props.onRename)return;return void setTimeout(()=>{node&&tree.edit(node)})}if(" "===e.key){e.preventDefault();const node=tree.focusedNode;if(!node)return;return void(node.isLeaf?(node.select(),node.activate()):node.toggle())}if("*"===e.key){const node=tree.focusedNode;if(!node)return;return void tree.openSiblings(node)}if("PageUp"===e.key)return e.preventDefault(),void tree.pageUp();"PageDown"===e.key&&(e.preventDefault(),tree.pageDown()),clearTimeout(timeoutId),focusSearchTerm+=e.key,timeoutId=setTimeout(()=>{focusSearchTerm=""},600);const node=tree.visibleNodes.find(n=>{const name=n.data.name;return"string"==typeof name&&name.toLowerCase().startsWith(focusSearchTerm)});node&&tree.focus(node.id)},children:(0,jsx_runtime.jsx)(FixedSizeList,{className:tree.props.className,outerRef:tree.listEl,itemCount:tree.visibleNodes.length,height:tree.height,width:tree.width,itemSize:tree.rowHeight,overscanCount:tree.overscanCount,itemKey:index=>{var _a;return(null===(_a=tree.visibleNodes[index])||void 0===_a?void 0:_a.id)||index},outerElementType:ListOuterElement,innerElementType:ListInnerElement,onScroll:tree.props.onScroll,onItemsRendered:tree.onItemsRendered.bind(tree),ref:tree.list,children:RowContainer})})}function createList(tree){return tree.isFiltered?function flattenAndFilterTree(root,isMatch){const matches={},list=[];function markMatch(node){if(!node.isRoot&&isMatch(node)){matches[node.id]=!0;let parent=node.parent;for(;parent;)matches[parent.id]=!0,parent=parent.parent}if(node.children)for(let child of node.children)markMatch(child)}function collect(node){var _a;node.level>=0&&matches[node.id]&&list.push(node),node.isOpen&&(null===(_a=node.children)||void 0===_a||_a.forEach(collect))}return markMatch(root),collect(root),list.forEach(assignRowIndex),list}(tree.root,tree.isMatch.bind(tree)):function flattenTree(root){const list=[];function collect(node){var _a;node.level>=0&&list.push(node),node.isOpen&&(null===(_a=node.children)||void 0===_a||_a.forEach(collect))}return collect(root),list.forEach(assignRowIndex),list}(tree.root)}function assignRowIndex(node,index){node.rowIndex=index}const createIndex=nodes=>nodes.reduce((map,node,index)=>(map[node.id]=index,map),{});var __awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};const{FS:tree_api_safeRun,ls:tree_api_identify,yQ:tree_api_identifyNull}=utils_namespaceObject;class TreeApi{constructor(store,props,list,listEl){this.store=store,this.props=props,this.list=list,this.listEl=listEl,this.visibleStartIndex=0,this.visibleStopIndex=0,this.root=createRoot(this),this.visibleNodes=createList(this),this.idToIndex=createIndex(this.visibleNodes)}update(props){this.props=props,this.root=createRoot(this),this.visibleNodes=createList(this),this.idToIndex=createIndex(this.visibleNodes)}dispatch(action){return this.store.dispatch(action)}get state(){return this.store.getState()}get openState(){return this.state.nodes.open.unfiltered}get width(){var _a;return null!==(_a=this.props.width)&&void 0!==_a?_a:300}get height(){var _a;return null!==(_a=this.props.height)&&void 0!==_a?_a:500}get indent(){var _a;return null!==(_a=this.props.indent)&&void 0!==_a?_a:24}get rowHeight(){var _a;return null!==(_a=this.props.rowHeight)&&void 0!==_a?_a:24}get overscanCount(){var _a;return null!==(_a=this.props.overscanCount)&&void 0!==_a?_a:1}get searchTerm(){return(this.props.searchTerm||"").trim()}get matchFn(){var _a;const match=null!==(_a=this.props.searchMatch)&&void 0!==_a?_a:(node,term)=>JSON.stringify(Object.values(node.data)).toLocaleLowerCase().includes(term.toLocaleLowerCase());return node=>match(node,this.searchTerm)}accessChildren(data){var _a;return null!==(_a=access(data,this.props.childrenAccessor||"children"))&&void 0!==_a?_a:null}accessId(data){const id=access(data,this.props.idAccessor||"id");if(!id)throw new Error("Data must contain an 'id' property or props.idAccessor must return a string");return id}get firstNode(){var _a;return null!==(_a=this.visibleNodes[0])&&void 0!==_a?_a:null}get lastNode(){var _a;return null!==(_a=this.visibleNodes[this.visibleNodes.length-1])&&void 0!==_a?_a:null}get focusedNode(){var _a;return null!==(_a=this.get(this.state.nodes.focus.id))&&void 0!==_a?_a:null}get mostRecentNode(){var _a;return null!==(_a=this.get(this.state.nodes.selection.mostRecent))&&void 0!==_a?_a:null}get nextNode(){const index=this.indexOf(this.focusedNode);return null===index?null:this.at(index+1)}get prevNode(){const index=this.indexOf(this.focusedNode);return null===index?null:this.at(index-1)}get(id){return id&&id in this.idToIndex&&this.visibleNodes[this.idToIndex[id]]||null}at(index){return this.visibleNodes[index]||null}nodesBetween(startId,endId){var _a;if(null===startId||null===endId)return[];const index1=null!==(_a=this.indexOf(startId))&&void 0!==_a?_a:0,index2=this.indexOf(endId);if(null===index2)return[];const start=Math.min(index1,index2),end=Math.max(index1,index2);return this.visibleNodes.slice(start,end+1)}indexOf(id){const key=identifyNull(id);return key?this.idToIndex[key]:null}get editingId(){return this.state.nodes.edit.id}createInternal(){return this.create({type:"internal"})}createLeaf(){return this.create({type:"leaf"})}create(){return __awaiter(this,arguments,void 0,function*(opts={}){var _a,_b;const parentId=void 0===opts.parentId?getInsertParentId(this):opts.parentId,index=null!==(_a=opts.index)&&void 0!==_a?_a:getInsertIndex(this),type=null!==(_b=opts.type)&&void 0!==_b?_b:"leaf",data=yield tree_api_safeRun(this.props.onCreate,{type,parentId,index,parentNode:this.get(parentId)});data&&(this.focus(data),setTimeout(()=>{this.edit(data).then(()=>{this.select(data),this.activate(data)})}))})}delete(node){return __awaiter(this,void 0,void 0,function*(){if(!node)return;const ids=(Array.isArray(node)?node:[node]).map(tree_api_identify),nodes=ids.map(id=>this.get(id)).filter(n=>!!n);yield tree_api_safeRun(this.props.onDelete,{nodes,ids})})}edit(node){const id=tree_api_identify(node);return this.resolveEdit({cancelled:!0}),this.scrollTo(id),this.dispatch(edit(id)),new Promise(resolve=>{TreeApi.editPromise=resolve})}submit(identity,value){return __awaiter(this,void 0,void 0,function*(){if(!identity)return;const id=tree_api_identify(identity);yield tree_api_safeRun(this.props.onRename,{id,name:value,node:this.get(id)}),this.dispatch(edit(null)),this.resolveEdit({cancelled:!1,value}),setTimeout(()=>this.onFocus())})}reset(){this.dispatch(edit(null)),this.resolveEdit({cancelled:!0}),setTimeout(()=>this.onFocus())}activate(id){const node=this.get(tree_api_identifyNull(id));node&&tree_api_safeRun(this.props.onActivate,node)}resolveEdit(value){const resolve=TreeApi.editPromise;resolve&&resolve(value),TreeApi.editPromise=null}get selectedIds(){return this.state.nodes.selection.ids}get selectedNodes(){let nodes=[];for(let id of Array.from(this.selectedIds)){const node=this.get(id);node&&nodes.push(node)}return nodes}focus(node,opts={}){node&&(this.props.selectionFollowsFocus?this.select(node):(this.dispatch(focus_slice_focus(tree_api_identify(node))),!1!==opts.scroll&&this.scrollTo(node),this.focusedNode&&tree_api_safeRun(this.props.onFocus,this.focusedNode)))}pageUp(){var _a,_b;const start=this.visibleStartIndex,page=this.visibleStopIndex-start;let index=null!==(_b=null===(_a=this.focusedNode)||void 0===_a?void 0:_a.rowIndex)&&void 0!==_b?_b:0;index=index>start?start:Math.max(start-page,0),this.focus(this.at(index))}pageDown(){var _a,_b;const start=this.visibleStartIndex,stop=this.visibleStopIndex,page=stop-start;let index=null!==(_b=null===(_a=this.focusedNode)||void 0===_a?void 0:_a.rowIndex)&&void 0!==_b?_b:0;index=index<stop?stop:Math.min(index+page,this.visibleNodes.length-1),this.focus(this.at(index))}select(node,opts={}){if(!node)return;const changeFocus=!1!==opts.focus,id=tree_api_identify(node);changeFocus&&this.dispatch(focus_slice_focus(id)),this.dispatch(selection_slice_actions_only(id)),this.dispatch(selection_slice_actions_anchor(id)),this.dispatch(selection_slice_actions_mostRecent(id)),this.scrollTo(id,opts.align),this.focusedNode&&changeFocus&&tree_api_safeRun(this.props.onFocus,this.focusedNode),tree_api_safeRun(this.props.onSelect,this.selectedNodes)}deselect(node){if(!node)return;const id=tree_api_identify(node);this.dispatch(selection_slice_actions_remove(id)),tree_api_safeRun(this.props.onSelect,this.selectedNodes)}selectMulti(identity){const node=this.get(tree_api_identifyNull(identity));node&&(this.dispatch(focus_slice_focus(node.id)),this.dispatch(selection_slice_actions_add(node.id)),this.dispatch(selection_slice_actions_anchor(node.id)),this.dispatch(selection_slice_actions_mostRecent(node.id)),this.scrollTo(node),this.focusedNode&&tree_api_safeRun(this.props.onFocus,this.focusedNode),tree_api_safeRun(this.props.onSelect,this.selectedNodes))}selectContiguous(identity){if(!identity)return;const id=tree_api_identify(identity),{anchor,mostRecent}=this.state.nodes.selection;this.dispatch(focus_slice_focus(id)),this.dispatch(selection_slice_actions_remove(this.nodesBetween(anchor,mostRecent))),this.dispatch(selection_slice_actions_add(this.nodesBetween(anchor,tree_api_identifyNull(id)))),this.dispatch(selection_slice_actions_mostRecent(id)),this.scrollTo(id),this.focusedNode&&tree_api_safeRun(this.props.onFocus,this.focusedNode),tree_api_safeRun(this.props.onSelect,this.selectedNodes)}deselectAll(){this.setSelection({ids:[],anchor:null,mostRecent:null}),tree_api_safeRun(this.props.onSelect,this.selectedNodes)}selectAll(){var _a;this.setSelection({ids:Object.keys(this.idToIndex),anchor:this.firstNode,mostRecent:this.lastNode}),this.dispatch(focus_slice_focus(null===(_a=this.lastNode)||void 0===_a?void 0:_a.id)),this.focusedNode&&tree_api_safeRun(this.props.onFocus,this.focusedNode),tree_api_safeRun(this.props.onSelect,this.selectedNodes)}setSelection(args){var _a;const ids=new Set(null===(_a=args.ids)||void 0===_a?void 0:_a.map(tree_api_identify)),anchor=tree_api_identifyNull(args.anchor),mostRecent=tree_api_identifyNull(args.mostRecent);this.dispatch(selection_slice_actions_set({ids,anchor,mostRecent})),tree_api_safeRun(this.props.onSelect,this.selectedNodes)}get cursorParentId(){const{cursor}=this.state.dnd;return"highlight"===cursor.type?cursor.id:null}get cursorOverFolder(){return"highlight"===this.state.dnd.cursor.type}get dragNodes(){return this.state.dnd.dragIds.map(id=>this.get(id)).filter(n=>!!n)}get dragNode(){return this.get(this.state.nodes.drag.id)}get dragDestinationParent(){return this.get(this.state.nodes.drag.destinationParentId)}get dragDestinationIndex(){return this.state.nodes.drag.destinationIndex}canDrop(){var _a;if(this.isFiltered)return!1;const parentNode=null!==(_a=this.get(this.state.dnd.parentId))&&void 0!==_a?_a:this.root,dragNodes=this.dragNodes,isDisabled=this.props.disableDrop;for(const drag of dragNodes){if(!drag)return!1;if(!parentNode)return!1;if(drag.isInternal&&isDescendant(parentNode,drag))return!1}return"function"==typeof isDisabled?!isDisabled({parentNode,dragNodes:this.dragNodes,index:this.state.dnd.index||0}):"string"==typeof isDisabled?!parentNode.data[isDisabled]:"boolean"!=typeof isDisabled||!isDisabled}hideCursor(){this.dispatch(dnd_slice_actions.cursor({type:"none"}))}showCursor(cursor){this.dispatch(dnd_slice_actions.cursor(cursor))}open(identity){const id=tree_api_identifyNull(identity);id&&(this.isOpen(id)||(this.dispatch(actions.open(id,this.isFiltered)),tree_api_safeRun(this.props.onToggle,id)))}close(identity){const id=tree_api_identifyNull(identity);id&&this.isOpen(id)&&(this.dispatch(actions.close(id,this.isFiltered)),tree_api_safeRun(this.props.onToggle,id))}toggle(identity){const id=tree_api_identifyNull(identity);if(id)return this.isOpen(id)?this.close(id):this.open(id)}openParents(identity){const id=tree_api_identifyNull(identity);if(!id)return;const node=dfs(this.root,id);let parent=null==node?void 0:node.parent;for(;parent;)this.open(parent.id),parent=parent.parent}openSiblings(node){const parent=node.parent;if(parent){if(parent.children){const isOpen=node.isOpen;for(let sibling of parent.children)sibling.isInternal&&(isOpen?this.close(sibling.id):this.open(sibling.id));this.scrollTo(this.focusedNode)}}else this.toggle(node.id)}openAll(){walk(this.root,node=>{node.isInternal&&node.open()})}closeAll(){walk(this.root,node=>{node.isInternal&&node.close()})}scrollTo(identity,align="smart"){if(!identity)return;const id=tree_api_identify(identity);return this.openParents(id),waitFor(()=>id in this.idToIndex).then(()=>{var _a;const index=this.idToIndex[id];void 0!==index&&(null===(_a=this.list.current)||void 0===_a||_a.scrollToItem(index,align))}).catch(()=>{})}get isEditing(){return null!==this.state.nodes.edit.id}get isFiltered(){var _a;return!!(null===(_a=this.props.searchTerm)||void 0===_a?void 0:_a.trim())}get hasFocus(){return this.state.nodes.focus.treeFocused}get hasNoSelection(){return 0===this.state.nodes.selection.ids.size}get hasOneSelection(){return 1===this.state.nodes.selection.ids.size}get hasMultipleSelections(){return this.state.nodes.selection.ids.size>1}isSelected(id){return!!id&&this.state.nodes.selection.ids.has(id)}isOpen(id){var _a,_b,_c;if(!id)return!1;if(id===ROOT_ID)return!0;const def=null===(_a=this.props.openByDefault)||void 0===_a||_a;return this.isFiltered?null===(_b=this.state.nodes.open.filtered[id])||void 0===_b||_b:null!==(_c=this.state.nodes.open.unfiltered[id])&&void 0!==_c?_c:def}isEditable(data){return!access(data,this.props.disableEdit||(()=>!1))}isDraggable(data){return!access(data,this.props.disableDrag||(()=>!1))}isDragging(node){const id=tree_api_identifyNull(node);return!!id&&this.state.nodes.drag.id===id}isFocused(id){return this.hasFocus&&this.state.nodes.focus.id===id}isMatch(node){return this.matchFn(node)}willReceiveDrop(node){const id=tree_api_identifyNull(node);if(!id)return!1;const{destinationParentId,destinationIndex}=this.state.nodes.drag;return id===destinationParentId&&null===destinationIndex}onFocus(){const node=this.focusedNode||this.firstNode;node&&this.dispatch(focus_slice_focus(node.id))}onBlur(){this.dispatch({type:"TREE_BLUR"})}onItemsRendered(args){this.visibleStartIndex=args.visibleStartIndex,this.visibleStopIndex=args.visibleStopIndex}get renderContainer(){return this.props.renderContainer||DefaultContainer}get renderRow(){return this.props.renderRow||DefaultRow}get renderNode(){return this.props.children||DefaultNode}get renderDragPreview(){return this.props.renderDragPreview||DefaultDragPreview}get renderCursor(){return this.props.renderCursor||DefaultCursor}}function formatProdErrorMessage(code){return"Minified Redux error #"+code+"; visit https://redux.js.org/Errors?code="+code+" for the full message or use the non-minified dev environment for full errors. "}var $$observable="function"==typeof Symbol&&Symbol.observable||"@@observable",randomString=function randomString(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function PROBE_UNKNOWN_ACTION(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(obj){if("object"!=typeof obj||null===obj)return!1;for(var proto=obj;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(obj)===proto}function createStore(reducer,preloadedState,enhancer){var _ref2;if("function"==typeof preloadedState&&"function"==typeof enhancer||"function"==typeof enhancer&&"function"==typeof arguments[3])throw new Error(formatProdErrorMessage(0));if("function"==typeof preloadedState&&void 0===enhancer&&(enhancer=preloadedState,preloadedState=void 0),void 0!==enhancer){if("function"!=typeof enhancer)throw new Error(formatProdErrorMessage(1));return enhancer(createStore)(reducer,preloadedState)}if("function"!=typeof reducer)throw new Error(formatProdErrorMessage(2));var currentReducer=reducer,currentState=preloadedState,currentListeners=[],nextListeners=currentListeners,isDispatching=!1;function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function getState(){if(isDispatching)throw new Error(formatProdErrorMessage(3));return currentState}function subscribe(listener){if("function"!=typeof listener)throw new Error(formatProdErrorMessage(4));if(isDispatching)throw new Error(formatProdErrorMessage(5));var isSubscribed=!0;return ensureCanMutateNextListeners(),nextListeners.push(listener),function unsubscribe(){if(isSubscribed){if(isDispatching)throw new Error(formatProdErrorMessage(6));isSubscribed=!1,ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1),currentListeners=null}}}function dispatch(action){if(!isPlainObject(action))throw new Error(formatProdErrorMessage(7));if(void 0===action.type)throw new Error(formatProdErrorMessage(8));if(isDispatching)throw new Error(formatProdErrorMessage(9));try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}for(var listeners=currentListeners=nextListeners,i=0;i<listeners.length;i++){(0,listeners[i])()}return action}return dispatch({type:ActionTypes.INIT}),(_ref2={dispatch,subscribe,getState,replaceReducer:function replaceReducer(nextReducer){if("function"!=typeof nextReducer)throw new Error(formatProdErrorMessage(10));currentReducer=nextReducer,dispatch({type:ActionTypes.REPLACE})}})[$$observable]=function observable(){var _ref,outerSubscribe=subscribe;return(_ref={subscribe:function subscribe(observer){if("object"!=typeof observer||null===observer)throw new Error(formatProdErrorMessage(11));function observeState(){observer.next&&observer.next(getState())}return observeState(),{unsubscribe:outerSubscribe(observeState)}}})[$$observable]=function(){return this},_ref},_ref2}function combineReducers(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];0,"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var shapeAssertionError,finalReducerKeys=Object.keys(finalReducers);try{!function assertReducerShape(reducers){Object.keys(reducers).forEach(function(key){var reducer=reducers[key];if(void 0===reducer(void 0,{type:ActionTypes.INIT}))throw new Error(formatProdErrorMessage(12));if(void 0===reducer(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()}))throw new Error(formatProdErrorMessage(13))})}(finalReducers)}catch(e){shapeAssertionError=e}return function combination(state,action){if(void 0===state&&(state={}),shapeAssertionError)throw shapeAssertionError;for(var hasChanged=!1,nextState={},_i=0;_i<finalReducerKeys.length;_i++){var _key=finalReducerKeys[_i],reducer=finalReducers[_key],previousStateForKey=state[_key],nextStateForKey=reducer(previousStateForKey,action);if(void 0===nextStateForKey){action&&action.type;throw new Error(formatProdErrorMessage(14))}nextState[_key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return(hasChanged=hasChanged||finalReducerKeys.length!==Object.keys(state).length)?nextState:state}}const rootReducer=combineReducers({nodes:combineReducers({focus:function focus_slice_reducer(state={id:null,treeFocused:!1},action){return"FOCUS"===action.type?Object.assign(Object.assign({},state),{id:action.id,treeFocused:!0}):"TREE_BLUR"===action.type?Object.assign(Object.assign({},state),{treeFocused:!1}):state},edit:function reducer(state={id:null},action){return"EDIT"===action.type?Object.assign(Object.assign({},state),{id:action.id}):state},open:function open_slice_reducer(state={filtered:{},unfiltered:{}},action){return action.type.startsWith("VISIBILITY")?action.filtered?Object.assign(Object.assign({},state),{filtered:openMapReducer(state.filtered,action)}):Object.assign(Object.assign({},state),{unfiltered:openMapReducer(state.unfiltered,action)}):state},selection:function selection_slice_reducer(state=initialState().nodes.selection,action){const ids=state.ids;switch(action.type){case"SELECTION_CLEAR":return Object.assign(Object.assign({},state),{ids:new Set});case"SELECTION_ONLY":return Object.assign(Object.assign({},state),{ids:new Set([action.id])});case"SELECTION_ADD":return 0===action.ids.length?state:(action.ids.forEach(id=>ids.add(id)),Object.assign(Object.assign({},state),{ids:new Set(ids)}));case"SELECTION_REMOVE":return 0===action.ids.length?state:(action.ids.forEach(id=>ids.delete(id)),Object.assign(Object.assign({},state),{ids:new Set(ids)}));case"SELECTION_SET":return Object.assign(Object.assign({},state),{ids:action.ids,mostRecent:action.mostRecent,anchor:action.anchor});case"SELECTION_MOST_RECENT":return Object.assign(Object.assign({},state),{mostRecent:action.id});case"SELECTION_ANCHOR":return Object.assign(Object.assign({},state),{anchor:action.id});default:return state}},drag:function drag_slice_reducer(state=initialState().nodes.drag,action){switch(action.type){case"DND_DRAG_START":return Object.assign(Object.assign({},state),{id:action.id,selectedIds:action.dragIds});case"DND_DRAG_END":return Object.assign(Object.assign({},state),{id:null,destinationParentId:null,destinationIndex:null,selectedIds:[]});case"DND_HOVERING":return action.parentId!==state.destinationParentId||action.index!=state.destinationIndex?Object.assign(Object.assign({},state),{destinationParentId:action.parentId,destinationIndex:action.index}):state;default:return state}}}),dnd:function dnd_slice_reducer(state=initialState().dnd,action){switch(action.type){case"DND_CURSOR":return Object.assign(Object.assign({},state),{cursor:action.cursor});case"DND_DRAG_START":return Object.assign(Object.assign({},state),{dragId:action.id,dragIds:action.dragIds});case"DND_DRAG_END":return initialState().dnd;case"DND_HOVERING":return Object.assign(Object.assign({},state),{parentId:action.parentId,index:action.index});default:return state}}});function memoize(fn){var result=null;return function memoized(){return null==result&&(result=fn()),result}}function EnterLeaveCounter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EnterLeaveCounter_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var EnterLeaveCounter=function(){function EnterLeaveCounter(isNodeInDocument){!function EnterLeaveCounter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EnterLeaveCounter),EnterLeaveCounter_defineProperty(this,"entered",[]),EnterLeaveCounter_defineProperty(this,"isNodeInDocument",void 0),this.isNodeInDocument=isNodeInDocument}return function EnterLeaveCounter_createClass(Constructor,protoProps,staticProps){return protoProps&&EnterLeaveCounter_defineProperties(Constructor.prototype,protoProps),staticProps&&EnterLeaveCounter_defineProperties(Constructor,staticProps),Constructor}(EnterLeaveCounter,[{key:"enter",value:function enter(enteringNode){var _this=this,previousLength=this.entered.length;return this.entered=function union(itemsA,itemsB){var set=new Set,insertItem=function insertItem(item){return set.add(item)};itemsA.forEach(insertItem),itemsB.forEach(insertItem);var result=[];return set.forEach(function(key){return result.push(key)}),result}(this.entered.filter(function isNodeEntered(node){return _this.isNodeInDocument(node)&&(!node.contains||node.contains(enteringNode))}),[enteringNode]),0===previousLength&&this.entered.length>0}},{key:"leave",value:function leave(leavingNode){var previousLength=this.entered.length;return this.entered=function without(items,item){return items.filter(function(i){return i!==item})}(this.entered.filter(this.isNodeInDocument),leavingNode),previousLength>0&&0===this.entered.length}},{key:"reset",value:function reset(){this.entered=[]}}]),EnterLeaveCounter}(),isFirefox=memoize(function(){return/firefox/i.test(navigator.userAgent)}),isSafari=memoize(function(){return Boolean(window.safari)});function MonotonicInterpolant_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function MonotonicInterpolant_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var MonotonicInterpolant=function(){function MonotonicInterpolant(xs,ys){!function MonotonicInterpolant_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MonotonicInterpolant),MonotonicInterpolant_defineProperty(this,"xs",void 0),MonotonicInterpolant_defineProperty(this,"ys",void 0),MonotonicInterpolant_defineProperty(this,"c1s",void 0),MonotonicInterpolant_defineProperty(this,"c2s",void 0),MonotonicInterpolant_defineProperty(this,"c3s",void 0);for(var length=xs.length,indexes=[],i=0;i<length;i++)indexes.push(i);indexes.sort(function(a,b){return xs[a]<xs[b]?-1:1});for(var dx,dy,dys=[],dxs=[],ms=[],_i=0;_i<length-1;_i++)dx=xs[_i+1]-xs[_i],dy=ys[_i+1]-ys[_i],dxs.push(dx),dys.push(dy),ms.push(dy/dx);for(var c1s=[ms[0]],_i2=0;_i2<dxs.length-1;_i2++){var m2=ms[_i2],mNext=ms[_i2+1];if(m2*mNext<=0)c1s.push(0);else{dx=dxs[_i2];var dxNext=dxs[_i2+1],common=dx+dxNext;c1s.push(3*common/((common+dxNext)/m2+(common+dx)/mNext))}}c1s.push(ms[ms.length-1]);for(var m,c2s=[],c3s=[],_i3=0;_i3<c1s.length-1;_i3++){m=ms[_i3];var c1=c1s[_i3],invDx=1/dxs[_i3],_common=c1+c1s[_i3+1]-m-m;c2s.push((m-c1-_common)*invDx),c3s.push(_common*invDx*invDx)}this.xs=xs,this.ys=ys,this.c1s=c1s,this.c2s=c2s,this.c3s=c3s}return function MonotonicInterpolant_createClass(Constructor,protoProps,staticProps){return protoProps&&MonotonicInterpolant_defineProperties(Constructor.prototype,protoProps),staticProps&&MonotonicInterpolant_defineProperties(Constructor,staticProps),Constructor}(MonotonicInterpolant,[{key:"interpolate",value:function interpolate(x){var xs=this.xs,ys=this.ys,c1s=this.c1s,c2s=this.c2s,c3s=this.c3s,i=xs.length-1;if(x===xs[i])return ys[i];for(var mid,low=0,high=c3s.length-1;low<=high;){var xHere=xs[mid=Math.floor(.5*(low+high))];if(xHere<x)low=mid+1;else{if(!(xHere>x))return ys[mid];high=mid-1}}var diff=x-xs[i=Math.max(0,high)],diffSq=diff*diff;return ys[i]+c1s[i]*diff+c2s[i]*diffSq+c3s[i]*diff*diffSq}}]),MonotonicInterpolant}();function getNodeClientOffset(node){var el=1===node.nodeType?node:node.parentElement;if(!el)return null;var _el$getBoundingClient=el.getBoundingClientRect(),top=_el$getBoundingClient.top;return{x:_el$getBoundingClient.left,y:top}}function getEventClientOffset(e){return{x:e.clientX,y:e.clientY}}function getDragPreviewOffset(sourceNode,dragPreview,clientOffset,anchorPoint,offsetPoint){var isImage=function isImageNode(node){var _document$documentEle;return"IMG"===node.nodeName&&(isFirefox()||!(null!==(_document$documentEle=document.documentElement)&&void 0!==_document$documentEle&&_document$documentEle.contains(node)))}(dragPreview),dragPreviewNodeOffsetFromClient=getNodeClientOffset(isImage?sourceNode:dragPreview),offsetFromDragPreview={x:clientOffset.x-dragPreviewNodeOffsetFromClient.x,y:clientOffset.y-dragPreviewNodeOffsetFromClient.y},sourceWidth=sourceNode.offsetWidth,sourceHeight=sourceNode.offsetHeight,anchorX=anchorPoint.anchorX,anchorY=anchorPoint.anchorY,_getDragPreviewSize=function getDragPreviewSize(isImage,dragPreview,sourceWidth,sourceHeight){var dragPreviewWidth=isImage?dragPreview.width:sourceWidth,dragPreviewHeight=isImage?dragPreview.height:sourceHeight;return isSafari()&&isImage&&(dragPreviewHeight/=window.devicePixelRatio,dragPreviewWidth/=window.devicePixelRatio),{dragPreviewWidth,dragPreviewHeight}}(isImage,dragPreview,sourceWidth,sourceHeight),dragPreviewWidth=_getDragPreviewSize.dragPreviewWidth,dragPreviewHeight=_getDragPreviewSize.dragPreviewHeight,offsetX=offsetPoint.offsetX,offsetY=offsetPoint.offsetY,isManualOffsetY=0===offsetY||offsetY;return{x:0===offsetX||offsetX?offsetX:function calculateXOffset(){return new MonotonicInterpolant([0,.5,1],[offsetFromDragPreview.x,offsetFromDragPreview.x/sourceWidth*dragPreviewWidth,offsetFromDragPreview.x+dragPreviewWidth-sourceWidth]).interpolate(anchorX)}(),y:isManualOffsetY?offsetY:function calculateYOffset(){var y=new MonotonicInterpolant([0,.5,1],[offsetFromDragPreview.y,offsetFromDragPreview.y/sourceHeight*dragPreviewHeight,offsetFromDragPreview.y+dragPreviewHeight-sourceHeight]).interpolate(anchorY);return isSafari()&&isImage&&(y+=(window.devicePixelRatio-1)*dragPreviewHeight),y}()}}var _nativeTypesConfig,FILE="__NATIVE_FILE__",URL="__NATIVE_URL__",TEXT="__NATIVE_TEXT__",HTML="__NATIVE_HTML__";function getDataFromDataTransfer(dataTransfer,typesToTry,defaultValue){var result=typesToTry.reduce(function(resultSoFar,typeToTry){return resultSoFar||dataTransfer.getData(typeToTry)},"");return null!=result?result:defaultValue}function nativeTypesConfig_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var nativeTypesConfig=(nativeTypesConfig_defineProperty(_nativeTypesConfig={},FILE,{exposeProperties:{files:function files(dataTransfer){return Array.prototype.slice.call(dataTransfer.files)},items:function items(dataTransfer){return dataTransfer.items},dataTransfer:function dataTransfer(_dataTransfer){return _dataTransfer}},matchesTypes:["Files"]}),nativeTypesConfig_defineProperty(_nativeTypesConfig,HTML,{exposeProperties:{html:function html(dataTransfer,matchesTypes){return getDataFromDataTransfer(dataTransfer,matchesTypes,"")},dataTransfer:function dataTransfer(_dataTransfer2){return _dataTransfer2}},matchesTypes:["Html","text/html"]}),nativeTypesConfig_defineProperty(_nativeTypesConfig,URL,{exposeProperties:{urls:function urls(dataTransfer,matchesTypes){return getDataFromDataTransfer(dataTransfer,matchesTypes,"").split("\n")},dataTransfer:function dataTransfer(_dataTransfer3){return _dataTransfer3}},matchesTypes:["Url","text/uri-list"]}),nativeTypesConfig_defineProperty(_nativeTypesConfig,TEXT,{exposeProperties:{text:function text(dataTransfer,matchesTypes){return getDataFromDataTransfer(dataTransfer,matchesTypes,"")},dataTransfer:function dataTransfer(_dataTransfer4){return _dataTransfer4}},matchesTypes:["Text","text/plain"]}),_nativeTypesConfig);function NativeDragSource_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NativeDragSource_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var NativeDragSource=function(){function NativeDragSource(config){!function NativeDragSource_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NativeDragSource),NativeDragSource_defineProperty(this,"item",void 0),NativeDragSource_defineProperty(this,"config",void 0),this.config=config,this.item={},this.initializeExposedProperties()}return function NativeDragSource_createClass(Constructor,protoProps,staticProps){return protoProps&&NativeDragSource_defineProperties(Constructor.prototype,protoProps),staticProps&&NativeDragSource_defineProperties(Constructor,staticProps),Constructor}(NativeDragSource,[{key:"initializeExposedProperties",value:function initializeExposedProperties(){var _this=this;Object.keys(this.config.exposeProperties).forEach(function(property){Object.defineProperty(_this.item,property,{configurable:!0,enumerable:!0,get:function get(){return console.warn("Browser doesn't allow reading \"".concat(property,'" until the drop event.')),null}})})}},{key:"loadDataTransfer",value:function loadDataTransfer(dataTransfer){var _this2=this;if(dataTransfer){var newProperties={};Object.keys(this.config.exposeProperties).forEach(function(property){newProperties[property]={value:_this2.config.exposeProperties[property](dataTransfer,_this2.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,newProperties)}}},{key:"canDrag",value:function canDrag(){return!0}},{key:"beginDrag",value:function beginDrag(){return this.item}},{key:"isDragging",value:function isDragging(monitor,handle){return handle===monitor.getSourceId()}},{key:"endDrag",value:function endDrag(){}}]),NativeDragSource}();function matchNativeItemType(dataTransfer){if(!dataTransfer)return null;var dataTransferTypes=Array.prototype.slice.call(dataTransfer.types||[]);return Object.keys(nativeTypesConfig).filter(function(nativeItemType){return nativeTypesConfig[nativeItemType].matchesTypes.some(function(t){return dataTransferTypes.indexOf(t)>-1})})[0]||null}function OptionsReader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function OptionsReader_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var OptionsReader=function(){function OptionsReader(globalContext,options){!function OptionsReader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OptionsReader),OptionsReader_defineProperty(this,"ownerDocument",null),OptionsReader_defineProperty(this,"globalContext",void 0),OptionsReader_defineProperty(this,"optionsArgs",void 0),this.globalContext=globalContext,this.optionsArgs=options}return function OptionsReader_createClass(Constructor,protoProps,staticProps){return protoProps&&OptionsReader_defineProperties(Constructor.prototype,protoProps),staticProps&&OptionsReader_defineProperties(Constructor,staticProps),Constructor}(OptionsReader,[{key:"window",get:function get(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}},{key:"document",get:function get(){var _this$globalContext;return null!==(_this$globalContext=this.globalContext)&&void 0!==_this$globalContext&&_this$globalContext.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function get(){var _this$optionsArgs;return(null===(_this$optionsArgs=this.optionsArgs)||void 0===_this$optionsArgs?void 0:_this$optionsArgs.rootElement)||this.window}}]),OptionsReader}();function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function HTML5BackendImpl_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){HTML5BackendImpl_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function HTML5BackendImpl_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function HTML5BackendImpl_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var HTML5BackendImpl=function(){function HTML5BackendImpl(manager,globalContext,options){var _this=this;!function HTML5BackendImpl_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HTML5BackendImpl),HTML5BackendImpl_defineProperty(this,"options",void 0),HTML5BackendImpl_defineProperty(this,"actions",void 0),HTML5BackendImpl_defineProperty(this,"monitor",void 0),HTML5BackendImpl_defineProperty(this,"registry",void 0),HTML5BackendImpl_defineProperty(this,"enterLeaveCounter",void 0),HTML5BackendImpl_defineProperty(this,"sourcePreviewNodes",new Map),HTML5BackendImpl_defineProperty(this,"sourcePreviewNodeOptions",new Map),HTML5BackendImpl_defineProperty(this,"sourceNodes",new Map),HTML5BackendImpl_defineProperty(this,"sourceNodeOptions",new Map),HTML5BackendImpl_defineProperty(this,"dragStartSourceIds",null),HTML5BackendImpl_defineProperty(this,"dropTargetIds",[]),HTML5BackendImpl_defineProperty(this,"dragEnterTargetIds",[]),HTML5BackendImpl_defineProperty(this,"currentNativeSource",null),HTML5BackendImpl_defineProperty(this,"currentNativeHandle",null),HTML5BackendImpl_defineProperty(this,"currentDragSourceNode",null),HTML5BackendImpl_defineProperty(this,"altKeyPressed",!1),HTML5BackendImpl_defineProperty(this,"mouseMoveTimeoutTimer",null),HTML5BackendImpl_defineProperty(this,"asyncEndDragFrameId",null),HTML5BackendImpl_defineProperty(this,"dragOverTargetIds",null),HTML5BackendImpl_defineProperty(this,"lastClientOffset",null),HTML5BackendImpl_defineProperty(this,"hoverRafId",null),HTML5BackendImpl_defineProperty(this,"getSourceClientOffset",function(sourceId){var source=_this.sourceNodes.get(sourceId);return source&&getNodeClientOffset(source)||null}),HTML5BackendImpl_defineProperty(this,"endDragNativeItem",function(){_this.isDraggingNativeItem()&&(_this.actions.endDrag(),_this.currentNativeHandle&&_this.registry.removeSource(_this.currentNativeHandle),_this.currentNativeHandle=null,_this.currentNativeSource=null)}),HTML5BackendImpl_defineProperty(this,"isNodeInDocument",function(node){return Boolean(node&&_this.document&&_this.document.body&&_this.document.body.contains(node))}),HTML5BackendImpl_defineProperty(this,"endDragIfSourceWasRemovedFromDOM",function(){var node=_this.currentDragSourceNode;null==node||_this.isNodeInDocument(node)||_this.clearCurrentDragSourceNode()&&_this.monitor.isDragging()&&_this.actions.endDrag()}),HTML5BackendImpl_defineProperty(this,"handleTopDragStartCapture",function(){_this.clearCurrentDragSourceNode(),_this.dragStartSourceIds=[]}),HTML5BackendImpl_defineProperty(this,"handleTopDragStart",function(e){if(!e.defaultPrevented){var dragStartSourceIds=_this.dragStartSourceIds;_this.dragStartSourceIds=null;var clientOffset=getEventClientOffset(e);_this.monitor.isDragging()&&_this.actions.endDrag(),_this.actions.beginDrag(dragStartSourceIds||[],{publishSource:!1,getSourceClientOffset:_this.getSourceClientOffset,clientOffset});var dataTransfer=e.dataTransfer,nativeType=matchNativeItemType(dataTransfer);if(_this.monitor.isDragging()){if(dataTransfer&&"function"==typeof dataTransfer.setDragImage){var sourceId=_this.monitor.getSourceId(),sourceNode=_this.sourceNodes.get(sourceId),dragPreview=_this.sourcePreviewNodes.get(sourceId)||sourceNode;if(dragPreview){var _this$getCurrentSourc=_this.getCurrentSourcePreviewNodeOptions(),dragPreviewOffset=getDragPreviewOffset(sourceNode,dragPreview,clientOffset,{anchorX:_this$getCurrentSourc.anchorX,anchorY:_this$getCurrentSourc.anchorY},{offsetX:_this$getCurrentSourc.offsetX,offsetY:_this$getCurrentSourc.offsetY});dataTransfer.setDragImage(dragPreview,dragPreviewOffset.x,dragPreviewOffset.y)}}try{null==dataTransfer||dataTransfer.setData("application/json",{})}catch(err){}_this.setCurrentDragSourceNode(e.target),_this.getCurrentSourcePreviewNodeOptions().captureDraggingState?_this.actions.publishDragSource():setTimeout(function(){return _this.actions.publishDragSource()},0)}else if(nativeType)_this.beginDragNativeItem(nativeType);else{if(dataTransfer&&!dataTransfer.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}}),HTML5BackendImpl_defineProperty(this,"handleTopDragEndCapture",function(){_this.clearCurrentDragSourceNode()&&_this.monitor.isDragging()&&_this.actions.endDrag()}),HTML5BackendImpl_defineProperty(this,"handleTopDragEnterCapture",function(e){if(_this.dragEnterTargetIds=[],_this.enterLeaveCounter.enter(e.target)&&!_this.monitor.isDragging()){var dataTransfer=e.dataTransfer,nativeType=matchNativeItemType(dataTransfer);nativeType&&_this.beginDragNativeItem(nativeType,dataTransfer)}}),HTML5BackendImpl_defineProperty(this,"handleTopDragEnter",function(e){var dragEnterTargetIds=_this.dragEnterTargetIds;(_this.dragEnterTargetIds=[],_this.monitor.isDragging())&&(_this.altKeyPressed=e.altKey,dragEnterTargetIds.length>0&&_this.actions.hover(dragEnterTargetIds,{clientOffset:getEventClientOffset(e)}),dragEnterTargetIds.some(function(targetId){return _this.monitor.canDropOnTarget(targetId)})&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=_this.getCurrentDropEffect())))}),HTML5BackendImpl_defineProperty(this,"handleTopDragOverCapture",function(){_this.dragOverTargetIds=[]}),HTML5BackendImpl_defineProperty(this,"handleTopDragOver",function(e){var dragOverTargetIds=_this.dragOverTargetIds;if(_this.dragOverTargetIds=[],!_this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));_this.altKeyPressed=e.altKey,_this.lastClientOffset=getEventClientOffset(e),null===_this.hoverRafId&&"undefined"!=typeof requestAnimationFrame&&(_this.hoverRafId=requestAnimationFrame(function(){_this.monitor.isDragging()&&_this.actions.hover(dragOverTargetIds||[],{clientOffset:_this.lastClientOffset}),_this.hoverRafId=null})),(dragOverTargetIds||[]).some(function(targetId){return _this.monitor.canDropOnTarget(targetId)})?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=_this.getCurrentDropEffect())):_this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))}),HTML5BackendImpl_defineProperty(this,"handleTopDragLeaveCapture",function(e){_this.isDraggingNativeItem()&&e.preventDefault(),_this.enterLeaveCounter.leave(e.target)&&_this.isDraggingNativeItem()&&setTimeout(function(){return _this.endDragNativeItem()},0)}),HTML5BackendImpl_defineProperty(this,"handleTopDropCapture",function(e){var _this$currentNativeSo;(_this.dropTargetIds=[],_this.isDraggingNativeItem())?(e.preventDefault(),null===(_this$currentNativeSo=_this.currentNativeSource)||void 0===_this$currentNativeSo||_this$currentNativeSo.loadDataTransfer(e.dataTransfer)):matchNativeItemType(e.dataTransfer)&&e.preventDefault();_this.enterLeaveCounter.reset()}),HTML5BackendImpl_defineProperty(this,"handleTopDrop",function(e){var dropTargetIds=_this.dropTargetIds;_this.dropTargetIds=[],_this.actions.hover(dropTargetIds,{clientOffset:getEventClientOffset(e)}),_this.actions.drop({dropEffect:_this.getCurrentDropEffect()}),_this.isDraggingNativeItem()?_this.endDragNativeItem():_this.monitor.isDragging()&&_this.actions.endDrag()}),HTML5BackendImpl_defineProperty(this,"handleSelectStart",function(e){var target=e.target;"function"==typeof target.dragDrop&&("INPUT"===target.tagName||"SELECT"===target.tagName||"TEXTAREA"===target.tagName||target.isContentEditable||(e.preventDefault(),target.dragDrop()))}),this.options=new OptionsReader(globalContext,options),this.actions=manager.getActions(),this.monitor=manager.getMonitor(),this.registry=manager.getRegistry(),this.enterLeaveCounter=new EnterLeaveCounter(this.isNodeInDocument)}return function HTML5BackendImpl_createClass(Constructor,protoProps,staticProps){return protoProps&&HTML5BackendImpl_defineProperties(Constructor.prototype,protoProps),staticProps&&HTML5BackendImpl_defineProperties(Constructor,staticProps),Constructor}(HTML5BackendImpl,[{key:"profile",value:function profile(){var _this$dragStartSource,_this$dragOverTargetI;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(_this$dragStartSource=this.dragStartSourceIds)||void 0===_this$dragStartSource?void 0:_this$dragStartSource.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(_this$dragOverTargetI=this.dragOverTargetIds)||void 0===_this$dragOverTargetI?void 0:_this$dragOverTargetI.length)||0}}},{key:"window",get:function get(){return this.options.window}},{key:"document",get:function get(){return this.options.document}},{key:"rootElement",get:function get(){return this.options.rootElement}},{key:"setup",value:function setup(){var root=this.rootElement;if(void 0!==root){if(root.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");root.__isReactDndBackendSetUp=!0,this.addEventListeners(root)}}},{key:"teardown",value:function teardown(){var _this$window,root=this.rootElement;void 0!==root&&(root.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(_this$window=this.window)||void 0===_this$window||_this$window.cancelAnimationFrame(this.asyncEndDragFrameId)))}},{key:"connectDragPreview",value:function connectDragPreview(sourceId,node,options){var _this2=this;return this.sourcePreviewNodeOptions.set(sourceId,options),this.sourcePreviewNodes.set(sourceId,node),function(){_this2.sourcePreviewNodes.delete(sourceId),_this2.sourcePreviewNodeOptions.delete(sourceId)}}},{key:"connectDragSource",value:function connectDragSource(sourceId,node,options){var _this3=this;this.sourceNodes.set(sourceId,node),this.sourceNodeOptions.set(sourceId,options);var handleDragStart=function handleDragStart(e){return _this3.handleDragStart(e,sourceId)},handleSelectStart=function handleSelectStart(e){return _this3.handleSelectStart(e)};return node.setAttribute("draggable","true"),node.addEventListener("dragstart",handleDragStart),node.addEventListener("selectstart",handleSelectStart),function(){_this3.sourceNodes.delete(sourceId),_this3.sourceNodeOptions.delete(sourceId),node.removeEventListener("dragstart",handleDragStart),node.removeEventListener("selectstart",handleSelectStart),node.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function connectDropTarget(targetId,node){var _this4=this,handleDragEnter=function handleDragEnter(e){return _this4.handleDragEnter(e,targetId)},handleDragOver=function handleDragOver(e){return _this4.handleDragOver(e,targetId)},handleDrop=function handleDrop(e){return _this4.handleDrop(e,targetId)};return node.addEventListener("dragenter",handleDragEnter),node.addEventListener("dragover",handleDragOver),node.addEventListener("drop",handleDrop),function(){node.removeEventListener("dragenter",handleDragEnter),node.removeEventListener("dragover",handleDragOver),node.removeEventListener("drop",handleDrop)}}},{key:"addEventListeners",value:function addEventListeners(target){target.addEventListener&&(target.addEventListener("dragstart",this.handleTopDragStart),target.addEventListener("dragstart",this.handleTopDragStartCapture,!0),target.addEventListener("dragend",this.handleTopDragEndCapture,!0),target.addEventListener("dragenter",this.handleTopDragEnter),target.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),target.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),target.addEventListener("dragover",this.handleTopDragOver),target.addEventListener("dragover",this.handleTopDragOverCapture,!0),target.addEventListener("drop",this.handleTopDrop),target.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function removeEventListeners(target){target.removeEventListener&&(target.removeEventListener("dragstart",this.handleTopDragStart),target.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),target.removeEventListener("dragend",this.handleTopDragEndCapture,!0),target.removeEventListener("dragenter",this.handleTopDragEnter),target.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),target.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),target.removeEventListener("dragover",this.handleTopDragOver),target.removeEventListener("dragover",this.handleTopDragOverCapture,!0),target.removeEventListener("drop",this.handleTopDrop),target.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function getCurrentSourceNodeOptions(){var sourceId=this.monitor.getSourceId(),sourceNodeOptions=this.sourceNodeOptions.get(sourceId);return HTML5BackendImpl_objectSpread({dropEffect:this.altKeyPressed?"copy":"move"},sourceNodeOptions||{})}},{key:"getCurrentDropEffect",value:function getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function getCurrentSourcePreviewNodeOptions(){var sourceId=this.monitor.getSourceId();return HTML5BackendImpl_objectSpread({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(sourceId)||{})}},{key:"isDraggingNativeItem",value:function isDraggingNativeItem(){var itemType=this.monitor.getItemType();return Object.keys(NativeTypes_namespaceObject).some(function(key){return NativeTypes_namespaceObject[key]===itemType})}},{key:"beginDragNativeItem",value:function beginDragNativeItem(type,dataTransfer){this.clearCurrentDragSourceNode(),this.currentNativeSource=function createNativeDragSource(type,dataTransfer){var result=new NativeDragSource(nativeTypesConfig[type]);return result.loadDataTransfer(dataTransfer),result}(type,dataTransfer),this.currentNativeHandle=this.registry.addSource(type,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function setCurrentDragSourceNode(node){var _this5=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=node;this.mouseMoveTimeoutTimer=setTimeout(function(){var _this5$rootElement;return null===(_this5$rootElement=_this5.rootElement)||void 0===_this5$rootElement?void 0:_this5$rootElement.addEventListener("mousemove",_this5.endDragIfSourceWasRemovedFromDOM,!0)},1e3)}},{key:"clearCurrentDragSourceNode",value:function clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var _this$window2;if(this.currentDragSourceNode=null,this.rootElement)null===(_this$window2=this.window)||void 0===_this$window2||_this$window2.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function handleDragStart(e,sourceId){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(sourceId))}},{key:"handleDragEnter",value:function handleDragEnter(e,targetId){this.dragEnterTargetIds.unshift(targetId)}},{key:"handleDragOver",value:function handleDragOver(e,targetId){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(targetId)}},{key:"handleDrop",value:function handleDrop(e,targetId){this.dropTargetIds.unshift(targetId)}}]),HTML5BackendImpl}(),HTML5Backend=function createBackend(manager,context,options){return new HTML5BackendImpl(manager,context,options)},BEGIN_DRAG="dnd-core/BEGIN_DRAG",HOVER="dnd-core/HOVER",DROP="dnd-core/DROP",END_DRAG="dnd-core/END_DRAG";function setClientOffset(clientOffset,sourceClientOffset){return{type:"dnd-core/INIT_COORDS",payload:{sourceClientOffset:sourceClientOffset||null,clientOffset:clientOffset||null}}}function js_utils_typeof(obj){return js_utils_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},js_utils_typeof(obj)}function isObject(input){return"object"===js_utils_typeof(input)}var ResetCoordinatesAction={type:"dnd-core/INIT_COORDS",payload:{clientOffset:null,sourceClientOffset:null}};function createBeginDrag(manager){return function beginDrag(){var sourceIds=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},_options$publishSourc=options.publishSource,publishSource=void 0===_options$publishSourc||_options$publishSourc,clientOffset=options.clientOffset,getSourceClientOffset=options.getSourceClientOffset,monitor=manager.getMonitor(),registry=manager.getRegistry();manager.dispatch(setClientOffset(clientOffset)),function verifyInvariants(sourceIds,monitor,registry){invariant(!monitor.isDragging(),"Cannot call beginDrag while dragging."),sourceIds.forEach(function(sourceId){invariant(registry.getSource(sourceId),"Expected sourceIds to be registered.")})}(sourceIds,monitor,registry);var sourceId=function getDraggableSource(sourceIds,monitor){for(var sourceId=null,i=sourceIds.length-1;i>=0;i--)if(monitor.canDragSource(sourceIds[i])){sourceId=sourceIds[i];break}return sourceId}(sourceIds,monitor);if(null!==sourceId){var sourceClientOffset=null;if(clientOffset){if(!getSourceClientOffset)throw new Error("getSourceClientOffset must be defined");!function verifyGetSourceClientOffsetIsFunction(getSourceClientOffset){invariant("function"==typeof getSourceClientOffset,"When clientOffset is provided, getSourceClientOffset must be a function.")}(getSourceClientOffset),sourceClientOffset=getSourceClientOffset(sourceId)}manager.dispatch(setClientOffset(clientOffset,sourceClientOffset));var item=registry.getSource(sourceId).beginDrag(monitor,sourceId);if(null!=item){!function verifyItemIsObject(item){invariant(isObject(item),"Item must be an object.")}(item),registry.pinSource(sourceId);var itemType=registry.getSourceType(sourceId);return{type:BEGIN_DRAG,payload:{itemType,item,sourceId,clientOffset:clientOffset||null,sourceClientOffset:sourceClientOffset||null,isSourcePublic:!!publishSource}}}}else manager.dispatch(ResetCoordinatesAction)}}function createPublishDragSource(manager){return function publishDragSource(){if(manager.getMonitor().isDragging())return{type:"dnd-core/PUBLISH_DRAG_SOURCE"}}}function matchesType(targetType,draggedItemType){return null===draggedItemType?null===targetType:Array.isArray(targetType)?targetType.some(function(t){return t===draggedItemType}):targetType===draggedItemType}function createHover(manager){return function hover(targetIdsArg){var clientOffset=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clientOffset;!function verifyTargetIdsIsArray(targetIdsArg){invariant(Array.isArray(targetIdsArg),"Expected targetIds to be an array.")}(targetIdsArg);var targetIds=targetIdsArg.slice(0),monitor=manager.getMonitor(),registry=manager.getRegistry();return function checkInvariants(targetIds,monitor,registry){invariant(monitor.isDragging(),"Cannot call hover while not dragging."),invariant(!monitor.didDrop(),"Cannot call hover after drop.");for(var i=0;i<targetIds.length;i++){var targetId=targetIds[i];invariant(targetIds.lastIndexOf(targetId)===i,"Expected targetIds to be unique in the passed array."),invariant(registry.getTarget(targetId),"Expected targetIds to be registered.")}}(targetIds,monitor,registry),function removeNonMatchingTargetIds(targetIds,registry,draggedItemType){for(var i=targetIds.length-1;i>=0;i--){var targetId=targetIds[i];matchesType(registry.getTargetType(targetId),draggedItemType)||targetIds.splice(i,1)}}(targetIds,registry,monitor.getItemType()),function hoverAllTargets(targetIds,monitor,registry){targetIds.forEach(function(targetId){registry.getTarget(targetId).hover(monitor,targetId)})}(targetIds,monitor,registry),{type:HOVER,payload:{targetIds,clientOffset:clientOffset||null}}}}function drop_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function drop_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?drop_ownKeys(Object(source),!0).forEach(function(key){drop_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):drop_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function drop_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function createDrop(manager){return function drop(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},monitor=manager.getMonitor(),registry=manager.getRegistry();!function drop_verifyInvariants(monitor){invariant(monitor.isDragging(),"Cannot call drop while not dragging."),invariant(!monitor.didDrop(),"Cannot call drop twice during one drag operation.")}(monitor);var targetIds=function getDroppableTargets(monitor){var targetIds=monitor.getTargetIds().filter(monitor.canDropOnTarget,monitor);return targetIds.reverse(),targetIds}(monitor);targetIds.forEach(function(targetId,index){var dropResult=function determineDropResult(targetId,index,registry,monitor){var target=registry.getTarget(targetId),dropResult=target?target.drop(monitor,targetId):void 0;(function verifyDropResultType(dropResult){invariant(void 0===dropResult||isObject(dropResult),"Drop result must either be an object or undefined.")})(dropResult),void 0===dropResult&&(dropResult=0===index?{}:monitor.getDropResult());return dropResult}(targetId,index,registry,monitor),action={type:DROP,payload:{dropResult:drop_objectSpread(drop_objectSpread({},options),dropResult)}};manager.dispatch(action)})}}function createEndDrag(manager){return function endDrag(){var monitor=manager.getMonitor(),registry=manager.getRegistry();!function verifyIsDragging(monitor){invariant(monitor.isDragging(),"Cannot call endDrag while not dragging.")}(monitor);var sourceId=monitor.getSourceId();null!=sourceId&&(registry.getSource(sourceId,!0).endDrag(monitor,sourceId),registry.unpinSource());return{type:END_DRAG}}}function DragDropManagerImpl_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DragDropManagerImpl_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var DragDropManagerImpl=function(){function DragDropManagerImpl(store,monitor){var _this=this;!function DragDropManagerImpl_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DragDropManagerImpl),DragDropManagerImpl_defineProperty(this,"store",void 0),DragDropManagerImpl_defineProperty(this,"monitor",void 0),DragDropManagerImpl_defineProperty(this,"backend",void 0),DragDropManagerImpl_defineProperty(this,"isSetUp",!1),DragDropManagerImpl_defineProperty(this,"handleRefCountChange",function(){var shouldSetUp=_this.store.getState().refCount>0;_this.backend&&(shouldSetUp&&!_this.isSetUp?(_this.backend.setup(),_this.isSetUp=!0):!shouldSetUp&&_this.isSetUp&&(_this.backend.teardown(),_this.isSetUp=!1))}),this.store=store,this.monitor=monitor,store.subscribe(this.handleRefCountChange)}return function DragDropManagerImpl_createClass(Constructor,protoProps,staticProps){return protoProps&&DragDropManagerImpl_defineProperties(Constructor.prototype,protoProps),staticProps&&DragDropManagerImpl_defineProperties(Constructor,staticProps),Constructor}(DragDropManagerImpl,[{key:"receiveBackend",value:function receiveBackend(backend){this.backend=backend}},{key:"getMonitor",value:function getMonitor(){return this.monitor}},{key:"getBackend",value:function getBackend(){return this.backend}},{key:"getRegistry",value:function getRegistry(){return this.monitor.registry}},{key:"getActions",value:function getActions(){var manager=this,dispatch=this.store.dispatch;var actions=function createDragDropActions(manager){return{beginDrag:createBeginDrag(manager),publishDragSource:createPublishDragSource(manager),hover:createHover(manager),drop:createDrop(manager),endDrag:createEndDrag(manager)}}(this);return Object.keys(actions).reduce(function(boundActions,key){var action=actions[key];return boundActions[key]=function bindActionCreator(actionCreator){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var action=actionCreator.apply(manager,args);void 0!==action&&dispatch(action)}}(action),boundActions},{})}},{key:"dispatch",value:function dispatch(action){this.store.dispatch(action)}}]),DragDropManagerImpl}(),strictEquality=function strictEquality(a,b){return a===b};function dragOffset_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function dragOffset_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?dragOffset_ownKeys(Object(source),!0).forEach(function(key){dragOffset_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):dragOffset_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function dragOffset_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var dragOffset_initialState={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function reduce(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dragOffset_initialState,action=arguments.length>1?arguments[1]:void 0,payload=action.payload;switch(action.type){case"dnd-core/INIT_COORDS":case BEGIN_DRAG:return{initialSourceClientOffset:payload.sourceClientOffset,initialClientOffset:payload.clientOffset,clientOffset:payload.clientOffset};case HOVER:return function areCoordsEqual(offsetA,offsetB){return!offsetA&&!offsetB||!(!offsetA||!offsetB)&&offsetA.x===offsetB.x&&offsetA.y===offsetB.y}(state.clientOffset,payload.clientOffset)?state:dragOffset_objectSpread(dragOffset_objectSpread({},state),{},{clientOffset:payload.clientOffset});case END_DRAG:case DROP:return dragOffset_initialState;default:return state}}var REMOVE_TARGET="dnd-core/REMOVE_TARGET";function dragOperation_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function dragOperation_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?dragOperation_ownKeys(Object(source),!0).forEach(function(key){dragOperation_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):dragOperation_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function dragOperation_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var dragOperation_initialState={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function dragOperation_reduce(){var items,item,state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dragOperation_initialState,action=arguments.length>1?arguments[1]:void 0,payload=action.payload;switch(action.type){case BEGIN_DRAG:return dragOperation_objectSpread(dragOperation_objectSpread({},state),{},{itemType:payload.itemType,item:payload.item,sourceId:payload.sourceId,isSourcePublic:payload.isSourcePublic,dropResult:null,didDrop:!1});case"dnd-core/PUBLISH_DRAG_SOURCE":return dragOperation_objectSpread(dragOperation_objectSpread({},state),{},{isSourcePublic:!0});case HOVER:return dragOperation_objectSpread(dragOperation_objectSpread({},state),{},{targetIds:payload.targetIds});case REMOVE_TARGET:return-1===state.targetIds.indexOf(payload.targetId)?state:dragOperation_objectSpread(dragOperation_objectSpread({},state),{},{targetIds:(items=state.targetIds,item=payload.targetId,items.filter(function(i){return i!==item}))});case DROP:return dragOperation_objectSpread(dragOperation_objectSpread({},state),{},{dropResult:payload.dropResult,didDrop:!0,targetIds:[]});case END_DRAG:return dragOperation_objectSpread(dragOperation_objectSpread({},state),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return state}}function refCount_reduce(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case"dnd-core/ADD_SOURCE":case"dnd-core/ADD_TARGET":return state+1;case"dnd-core/REMOVE_SOURCE":case REMOVE_TARGET:return state-1;default:return state}}var NONE=[],ALL=[];function dirtyHandlerIds_reduce(){var action=arguments.length>1?arguments[1]:void 0;switch(action.type){case HOVER:break;case"dnd-core/ADD_SOURCE":case"dnd-core/ADD_TARGET":case REMOVE_TARGET:case"dnd-core/REMOVE_SOURCE":return NONE;default:return ALL}var _action$payload=action.payload,_action$payload$targe=_action$payload.targetIds,targetIds=void 0===_action$payload$targe?[]:_action$payload$targe,_action$payload$prevT=_action$payload.prevTargetIds,prevTargetIds=void 0===_action$payload$prevT?[]:_action$payload$prevT,result=function xor(itemsA,itemsB){var map=new Map,insertItem=function insertItem(item){map.set(item,map.has(item)?map.get(item)+1:1)};itemsA.forEach(insertItem),itemsB.forEach(insertItem);var result=[];return map.forEach(function(count,key){1===count&&result.push(key)}),result}(targetIds,prevTargetIds),didChange=result.length>0||!function areArraysEqual(a,b){var isEqual=arguments.length>2&&void 0!==arguments[2]?arguments[2]:strictEquality;if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(!isEqual(a[i],b[i]))return!1;return!0}(targetIds,prevTargetIds);if(!didChange)return NONE;var prevInnermostTargetId=prevTargetIds[prevTargetIds.length-1],innermostTargetId=targetIds[targetIds.length-1];return prevInnermostTargetId!==innermostTargetId&&(prevInnermostTargetId&&result.push(prevInnermostTargetId),innermostTargetId&&result.push(innermostTargetId)),result}function stateId_reduce(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}function reducers_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function reducers_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?reducers_ownKeys(Object(source),!0).forEach(function(key){reducers_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):reducers_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function reducers_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function reducers_reduce(){var obj,path,defaultValue,state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:dirtyHandlerIds_reduce(state.dirtyHandlerIds,{type:action.type,payload:reducers_objectSpread(reducers_objectSpread({},action.payload),{},{prevTargetIds:(obj=state,path="dragOperation.targetIds",defaultValue=[],path.split(".").reduce(function(a,c){return a&&a[c]?a[c]:defaultValue||null},obj))})}),dragOffset:reduce(state.dragOffset,action),refCount:refCount_reduce(state.refCount,action),dragOperation:dragOperation_reduce(state.dragOperation,action),stateId:stateId_reduce(state.stateId)}}function subtract(a,b){return{x:a.x-b.x,y:a.y-b.y}}function DragDropMonitorImpl_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function DragDropMonitorImpl_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}NONE.__IS_NONE__=!0,ALL.__IS_ALL__=!0;var HandlerRole,DragDropMonitorImpl=function(){function DragDropMonitorImpl(store,registry){!function DragDropMonitorImpl_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DragDropMonitorImpl),DragDropMonitorImpl_defineProperty(this,"store",void 0),DragDropMonitorImpl_defineProperty(this,"registry",void 0),this.store=store,this.registry=registry}return function DragDropMonitorImpl_createClass(Constructor,protoProps,staticProps){return protoProps&&DragDropMonitorImpl_defineProperties(Constructor.prototype,protoProps),staticProps&&DragDropMonitorImpl_defineProperties(Constructor,staticProps),Constructor}(DragDropMonitorImpl,[{key:"subscribeToStateChange",value:function subscribeToStateChange(listener){var _this=this,handlerIds=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0}).handlerIds;invariant("function"==typeof listener,"listener must be a function."),invariant(void 0===handlerIds||Array.isArray(handlerIds),"handlerIds, when specified, must be an array of strings.");var prevStateId=this.store.getState().stateId;return this.store.subscribe(function handleChange(){var state=_this.store.getState(),currentStateId=state.stateId;try{var canSkipListener=currentStateId===prevStateId||currentStateId===prevStateId+1&&!function areDirty(dirtyIds,handlerIds){return dirtyIds!==NONE&&(dirtyIds===ALL||void 0===handlerIds||function intersection(itemsA,itemsB){return itemsA.filter(function(t){return itemsB.indexOf(t)>-1})}(handlerIds,dirtyIds).length>0)}(state.dirtyHandlerIds,handlerIds);canSkipListener||listener()}finally{prevStateId=currentStateId}})}},{key:"subscribeToOffsetChange",value:function subscribeToOffsetChange(listener){var _this2=this;invariant("function"==typeof listener,"listener must be a function.");var previousState=this.store.getState().dragOffset;return this.store.subscribe(function handleChange(){var nextState=_this2.store.getState().dragOffset;nextState!==previousState&&(previousState=nextState,listener())})}},{key:"canDragSource",value:function canDragSource(sourceId){if(!sourceId)return!1;var source=this.registry.getSource(sourceId);return invariant(source,"Expected to find a valid source. sourceId=".concat(sourceId)),!this.isDragging()&&source.canDrag(this,sourceId)}},{key:"canDropOnTarget",value:function canDropOnTarget(targetId){if(!targetId)return!1;var target=this.registry.getTarget(targetId);return invariant(target,"Expected to find a valid target. targetId=".concat(targetId)),!(!this.isDragging()||this.didDrop())&&(matchesType(this.registry.getTargetType(targetId),this.getItemType())&&target.canDrop(this,targetId))}},{key:"isDragging",value:function isDragging(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function isDraggingSource(sourceId){if(!sourceId)return!1;var source=this.registry.getSource(sourceId,!0);return invariant(source,"Expected to find a valid source. sourceId=".concat(sourceId)),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(sourceId)===this.getItemType()&&source.isDragging(this,sourceId))}},{key:"isOverTarget",value:function isOverTarget(targetId){if(!targetId)return!1;var shallow=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1}).shallow;if(!this.isDragging())return!1;var targetType=this.registry.getTargetType(targetId),draggedItemType=this.getItemType();if(draggedItemType&&!matchesType(targetType,draggedItemType))return!1;var targetIds=this.getTargetIds();if(!targetIds.length)return!1;var index=targetIds.indexOf(targetId);return shallow?index===targetIds.length-1:index>-1}},{key:"getItemType",value:function getItemType(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function getItem(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function getSourceId(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function getTargetIds(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function getDropResult(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function didDrop(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function getClientOffset(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function getSourceClientOffset(){return function coords_getSourceClientOffset(state){var clientOffset=state.clientOffset,initialClientOffset=state.initialClientOffset,initialSourceClientOffset=state.initialSourceClientOffset;return clientOffset&&initialClientOffset&&initialSourceClientOffset?subtract(function add(a,b){return{x:a.x+b.x,y:a.y+b.y}}(clientOffset,initialSourceClientOffset),initialClientOffset):null}(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function getDifferenceFromInitialOffset(){return function coords_getDifferenceFromInitialOffset(state){var clientOffset=state.clientOffset,initialClientOffset=state.initialClientOffset;return clientOffset&&initialClientOffset?subtract(clientOffset,initialClientOffset):null}(this.store.getState().dragOffset)}}]),DragDropMonitorImpl}(),nextUniqueId=0;function contracts_typeof(obj){return contracts_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},contracts_typeof(obj)}function validateType(type,allowArray){allowArray&&Array.isArray(type)?type.forEach(function(t){return validateType(t,!1)}):invariant("string"==typeof type||"symbol"===contracts_typeof(type),allowArray?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}!function(HandlerRole){HandlerRole.SOURCE="SOURCE",HandlerRole.TARGET="TARGET"}(HandlerRole||(HandlerRole={}));const scope=void 0!==__webpack_require__.g?__webpack_require__.g:self,BrowserMutationObserver=scope.MutationObserver||scope.WebKitMutationObserver;function makeRequestCallFromTimer(callback){return function requestCall(){const timeoutHandle=setTimeout(handleTimer,0),intervalHandle=setInterval(handleTimer,50);function handleTimer(){clearTimeout(timeoutHandle),clearInterval(intervalHandle),callback()}}}const makeRequestCall="function"==typeof BrowserMutationObserver?function makeRequestCallFromMutationObserver(callback){let toggle=1;const observer=new BrowserMutationObserver(callback),node=document.createTextNode("");return observer.observe(node,{characterData:!0}),function requestCall(){toggle=-toggle,node.data=toggle}}:makeRequestCallFromTimer;class RawTask{call(){try{this.task&&this.task()}catch(error){this.onError(error)}finally{this.task=null,this.release(this)}}constructor(onError,release){this.onError=onError,this.release=release,this.task=null}}const asapQueue=new class AsapQueue{enqueueTask(task){const{queue:q,requestFlush}=this;q.length||(requestFlush(),this.flushing=!0),q[q.length]=task}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:q}=this;for(;this.index<q.length;){const currentIndex=this.index;if(this.index++,q[currentIndex].call(),this.index>this.capacity){for(let scan=0,newLength=q.length-this.index;scan<newLength;scan++)q[scan]=q[scan+this.index];q.length-=this.index,this.index=0}}q.length=0,this.index=0,this.flushing=!1},this.registerPendingError=err=>{this.pendingErrors.push(err),this.requestErrorThrow()},this.requestFlush=makeRequestCall(this.flush),this.requestErrorThrow=makeRequestCallFromTimer(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},taskFactory=new class TaskFactory{create(task){const tasks=this.freeTasks,t1=tasks.length?tasks.pop():new RawTask(this.onError,t=>tasks[tasks.length]=t);return t1.task=task,t1}constructor(onError){this.onError=onError,this.freeTasks=[]}}(asapQueue.registerPendingError);function HandlerRegistryImpl_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function HandlerRegistryImpl_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function HandlerRegistryImpl_slicedToArray(arr,i){return function HandlerRegistryImpl_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function HandlerRegistryImpl_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function HandlerRegistryImpl_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return HandlerRegistryImpl_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HandlerRegistryImpl_arrayLikeToArray(o,minLen)}(arr,i)||function HandlerRegistryImpl_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HandlerRegistryImpl_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getNextHandlerId(role){var id=function getNextUniqueId(){return nextUniqueId++}().toString();switch(role){case HandlerRole.SOURCE:return"S".concat(id);case HandlerRole.TARGET:return"T".concat(id);default:throw new Error("Unknown Handler Role: ".concat(role))}}function parseRoleFromHandlerId(handlerId){switch(handlerId[0]){case"S":return HandlerRole.SOURCE;case"T":return HandlerRole.TARGET;default:invariant(!1,"Cannot parse handler ID: ".concat(handlerId))}}function mapContainsValue(map,searchValue){var entries=map.entries(),isDone=!1;do{var _entries$next=entries.next(),done=_entries$next.done;if(HandlerRegistryImpl_slicedToArray(_entries$next.value,2)[1]===searchValue)return!0;isDone=!!done}while(!isDone);return!1}var HandlerRegistryImpl=function(){function HandlerRegistryImpl(store){!function HandlerRegistryImpl_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HandlerRegistryImpl),HandlerRegistryImpl_defineProperty(this,"types",new Map),HandlerRegistryImpl_defineProperty(this,"dragSources",new Map),HandlerRegistryImpl_defineProperty(this,"dropTargets",new Map),HandlerRegistryImpl_defineProperty(this,"pinnedSourceId",null),HandlerRegistryImpl_defineProperty(this,"pinnedSource",null),HandlerRegistryImpl_defineProperty(this,"store",void 0),this.store=store}return function HandlerRegistryImpl_createClass(Constructor,protoProps,staticProps){return protoProps&&HandlerRegistryImpl_defineProperties(Constructor.prototype,protoProps),staticProps&&HandlerRegistryImpl_defineProperties(Constructor,staticProps),Constructor}(HandlerRegistryImpl,[{key:"addSource",value:function addSource(type,source){validateType(type),function validateSourceContract(source){invariant("function"==typeof source.canDrag,"Expected canDrag to be a function."),invariant("function"==typeof source.beginDrag,"Expected beginDrag to be a function."),invariant("function"==typeof source.endDrag,"Expected endDrag to be a function.")}(source);var sourceId=this.addHandler(HandlerRole.SOURCE,type,source);return this.store.dispatch(function registry_addSource(sourceId){return{type:"dnd-core/ADD_SOURCE",payload:{sourceId}}}(sourceId)),sourceId}},{key:"addTarget",value:function addTarget(type,target){validateType(type,!0),function validateTargetContract(target){invariant("function"==typeof target.canDrop,"Expected canDrop to be a function."),invariant("function"==typeof target.hover,"Expected hover to be a function."),invariant("function"==typeof target.drop,"Expected beginDrag to be a function.")}(target);var targetId=this.addHandler(HandlerRole.TARGET,type,target);return this.store.dispatch(function registry_addTarget(targetId){return{type:"dnd-core/ADD_TARGET",payload:{targetId}}}(targetId)),targetId}},{key:"containsHandler",value:function containsHandler(handler){return mapContainsValue(this.dragSources,handler)||mapContainsValue(this.dropTargets,handler)}},{key:"getSource",value:function getSource(sourceId){var includePinned=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return invariant(this.isSourceId(sourceId),"Expected a valid source ID."),includePinned&&sourceId===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(sourceId)}},{key:"getTarget",value:function getTarget(targetId){return invariant(this.isTargetId(targetId),"Expected a valid target ID."),this.dropTargets.get(targetId)}},{key:"getSourceType",value:function getSourceType(sourceId){return invariant(this.isSourceId(sourceId),"Expected a valid source ID."),this.types.get(sourceId)}},{key:"getTargetType",value:function getTargetType(targetId){return invariant(this.isTargetId(targetId),"Expected a valid target ID."),this.types.get(targetId)}},{key:"isSourceId",value:function isSourceId(handlerId){return parseRoleFromHandlerId(handlerId)===HandlerRole.SOURCE}},{key:"isTargetId",value:function isTargetId(handlerId){return parseRoleFromHandlerId(handlerId)===HandlerRole.TARGET}},{key:"removeSource",value:function removeSource(sourceId){var _this=this;invariant(this.getSource(sourceId),"Expected an existing source."),this.store.dispatch(function registry_removeSource(sourceId){return{type:"dnd-core/REMOVE_SOURCE",payload:{sourceId}}}(sourceId)),function asap(task){asapQueue.enqueueTask(taskFactory.create(task))}(function(){_this.dragSources.delete(sourceId),_this.types.delete(sourceId)})}},{key:"removeTarget",value:function removeTarget(targetId){invariant(this.getTarget(targetId),"Expected an existing target."),this.store.dispatch(function registry_removeTarget(targetId){return{type:REMOVE_TARGET,payload:{targetId}}}(targetId)),this.dropTargets.delete(targetId),this.types.delete(targetId)}},{key:"pinSource",value:function pinSource(sourceId){var source=this.getSource(sourceId);invariant(source,"Expected an existing source."),this.pinnedSourceId=sourceId,this.pinnedSource=source}},{key:"unpinSource",value:function unpinSource(){invariant(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function addHandler(role,type,handler){var id=getNextHandlerId(role);return this.types.set(id,type),role===HandlerRole.SOURCE?this.dragSources.set(id,handler):role===HandlerRole.TARGET&&this.dropTargets.set(id,handler),id}}]),HandlerRegistryImpl}();function createDragDropManager(backendFactory){var globalContext=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,backendOptions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},store=function makeStoreInstance(debugMode){var reduxDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return createStore(reducers_reduce,debugMode&&reduxDevTools&&reduxDevTools({name:"dnd-core",instanceId:"dnd-core"}))}(arguments.length>3&&void 0!==arguments[3]&&arguments[3]),monitor=new DragDropMonitorImpl(store,new HandlerRegistryImpl(store)),manager=new DragDropManagerImpl(store,monitor),backend=backendFactory(manager,globalContext,backendOptions);return manager.receiveBackend(backend),manager}var DndProvider_excluded=["children"];function DndProvider_slicedToArray(arr,i){return function DndProvider_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function DndProvider_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function DndProvider_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return DndProvider_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DndProvider_arrayLikeToArray(o,minLen)}(arr,i)||function DndProvider_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DndProvider_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function DndProvider_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var refCount=0,INSTANCE_SYM=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),DndProvider=(0,react.memo)(function DndProvider(_ref){var children=_ref.children,_getDndContextValue=function getDndContextValue(props){if("manager"in props){return[{dragDropManager:props.manager},!1]}var manager=function createSingletonDndContext(backend){var context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:getGlobalContext(),options=arguments.length>2?arguments[2]:void 0,debugMode=arguments.length>3?arguments[3]:void 0,ctx=context;ctx[INSTANCE_SYM]||(ctx[INSTANCE_SYM]={dragDropManager:createDragDropManager(backend,context,options,debugMode)});return ctx[INSTANCE_SYM]}(props.backend,props.context,props.options,props.debugMode),isGlobalInstance=!props.context;return[manager,isGlobalInstance]}(_objectWithoutProperties(_ref,DndProvider_excluded)),_getDndContextValue2=DndProvider_slicedToArray(_getDndContextValue,2),manager=_getDndContextValue2[0],isGlobalInstance=_getDndContextValue2[1];return(0,react.useEffect)(function(){if(isGlobalInstance){var context=getGlobalContext();return++refCount,function(){0===--refCount&&(context[INSTANCE_SYM]=null)}}},[]),(0,jsx_runtime.jsx)(DndContext_DndContext.Provider,Object.assign({value:manager},{children}),void 0)});function getGlobalContext(){return void 0!==__webpack_require__.g?__webpack_require__.g:window}const SERVER_STATE=initialState();function TreeProvider({treeProps,imperativeHandle,children}){const list=(0,react.useRef)(null),listEl=(0,react.useRef)(null),store=(0,react.useRef)(createStore(rootReducer,initialState(treeProps))),state=(0,shim.useSyncExternalStore)(store.current.subscribe,store.current.getState,()=>SERVER_STATE),api=(0,react.useMemo)(()=>new TreeApi(store.current,treeProps,list,listEl),[]),updateCount=(0,react.useRef)(0);return(0,react.useMemo)(()=>{updateCount.current+=1,api.update(treeProps)},[...Object.values(treeProps),state.nodes.open]),(0,react.useImperativeHandle)(imperativeHandle,()=>api),(0,react.useEffect)(()=>{api.props.selection?api.select(api.props.selection,{focus:!1}):api.deselectAll()},[api.props.selection]),(0,react.useEffect)(()=>{api.props.searchTerm||store.current.dispatch(actions.clear(!0))},[api.props.searchTerm]),(0,jsx_runtime.jsx)(TreeApiContext.Provider,{value:api,children:(0,jsx_runtime.jsx)(DataUpdatesContext.Provider,{value:updateCount.current,children:(0,jsx_runtime.jsx)(NodesContext.Provider,{value:state.nodes,children:(0,jsx_runtime.jsx)(DndContext.Provider,{value:state.dnd,children:(0,jsx_runtime.jsx)(DndProvider,Object.assign({backend:HTML5Backend,options:{rootElement:api.props.dndRootElement||void 0}},treeProps.dndManager&&{manager:treeProps.dndManager},{children}))})})})})}function OuterDrop(props){return function useOuterDrop(){const tree=useTreeApi(),[,drop]=useDrop(()=>({accept:"NODE",canDrop:(_item,m)=>!!m.isOver({shallow:!0})&&tree.canDrop(),hover:(_item,m)=>{if(!m.isOver({shallow:!0}))return;const offset=m.getClientOffset();if(!tree.listEl.current||!offset)return;const{cursor,drop}=computeDrop({element:tree.listEl.current,offset,indent:tree.indent,node:null,prevNode:tree.visibleNodes[tree.visibleNodes.length-1],nextNode:null});drop&&tree.dispatch(dnd_slice_actions.hovering(drop.parentId,drop.index)),m.canDrop()?cursor&&tree.showCursor(cursor):tree.hideCursor()}}),[tree]);drop(tree.listEl)}(),props.children}function TreeContainer(){const Container=useTreeApi().props.renderContainer||DefaultContainer;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Container,{})})}function useDragLayer_slicedToArray(arr,i){return function useDragLayer_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useDragLayer_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function useDragLayer_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useDragLayer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useDragLayer_arrayLikeToArray(o,minLen)}(arr,i)||function useDragLayer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useDragLayer_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function DragPreviewContainer(){const tree=useTreeApi(),{offset,mouse,item,isDragging}=function useDragLayer(collect){var monitor=useDragDropManager().getMonitor(),_useCollector2=useDragLayer_slicedToArray(useCollector(monitor,collect),2),collected=_useCollector2[0],updateCollected=_useCollector2[1];return(0,react.useEffect)(function(){return monitor.subscribeToOffsetChange(updateCollected)}),(0,react.useEffect)(function(){return monitor.subscribeToStateChange(updateCollected)}),collected}(m=>({offset:m.getSourceClientOffset(),mouse:m.getClientOffset(),item:m.getItem(),isDragging:m.isDragging()})),DragPreview=tree.props.renderDragPreview||DefaultDragPreview;return(0,jsx_runtime.jsx)(DragPreview,{offset,mouse,id:(null==item?void 0:item.id)||null,dragIds:(null==item?void 0:item.dragIds)||[],isDragging})}class SimpleTree{constructor(data){this.root=function simple_tree_createRoot(data){const root=new SimpleNode({id:"ROOT"},null);return root.children=data.map(d=>createNode(d,root)),root}(data)}get data(){var _a,_b;return null!==(_b=null===(_a=this.root.children)||void 0===_a?void 0:_a.map(node=>node.data))&&void 0!==_b?_b:[]}create(args){const parent=args.parentId?this.find(args.parentId):this.root;if(!parent)return null;parent.addChild(args.data,args.index)}move(args){const src=this.find(args.id),parent=args.parentId?this.find(args.parentId):this.root;src&&parent&&(parent.addChild(src.data,args.index),src.drop())}update(args){const node=this.find(args.id);node&&node.update(args.changes)}drop(args){const node=this.find(args.id);node&&node.drop()}find(id,node=this.root){if(!node)return null;if(node.id===id)return node;if(node.children){for(let child of node.children){const found=this.find(id,child);if(found)return found}return null}return null}}function createNode(data,parent){const node=new SimpleNode(data,parent);return data.children&&(node.children=data.children.map(d=>createNode(d,node))),node}class SimpleNode{constructor(data,parent){this.data=data,this.parent=parent,this.id=data.id}hasParent(){return!!this.parent}get childIndex(){return this.hasParent()?this.parent.children.indexOf(this):-1}addChild(data,index){var _a,_b;const node=createNode(data,this);this.children=null!==(_a=this.children)&&void 0!==_a?_a:[],this.children.splice(index,0,node),this.data.children=null!==(_b=this.data.children)&&void 0!==_b?_b:[],this.data.children.splice(index,0,data)}removeChild(index){var _a,_b;null===(_a=this.children)||void 0===_a||_a.splice(index,1),null===(_b=this.data.children)||void 0===_b||_b.splice(index,1)}update(changes){if(this.hasParent()){const i=this.childIndex;this.parent.addChild(Object.assign(Object.assign({},this.data),changes),i),this.drop()}}drop(){this.hasParent()&&this.parent.removeChild(this.childIndex)}}let nextId=0;function useValidatedProps(props){if(props.initialData&&props.data)throw new Error("React Arborist Tree => Provide either a data or initialData prop, but not both.");if(props.initialData&&(props.onCreate||props.onDelete||props.onMove||props.onRename))throw new Error("React Arborist Tree => You passed the initialData prop along with a data handler.\nUse the data prop if you want to provide your own handlers.");if(props.initialData){const[data,controller]=function useSimpleTree(initialData){const[data,setData]=(0,react.useState)(initialData),tree=(0,react.useMemo)(()=>new SimpleTree(data),[data]),controller={onMove:args=>{for(const id of args.dragIds)tree.move({id,parentId:args.parentId,index:args.index});setData(tree.data)},onRename:({name,id})=>{tree.update({id,changes:{name}}),setData(tree.data)},onCreate:({parentId,index,type})=>{const data={id:"simple-tree-id-"+nextId++,name:""};return"internal"===type&&(data.children=[]),tree.create({parentId,index,data}),setData(tree.data),data},onDelete:args=>{args.ids.forEach(id=>tree.drop({id})),setData(tree.data)}};return[data,controller]}(props.initialData);return Object.assign(Object.assign(Object.assign({},props),controller),{data})}return props}const Tree=(0,react.forwardRef)(function TreeComponent(props,ref){const treeProps=useValidatedProps(props);return(0,jsx_runtime.jsxs)(TreeProvider,{treeProps,imperativeHandle:ref,children:[(0,jsx_runtime.jsx)(OuterDrop,{children:(0,jsx_runtime.jsx)(TreeContainer,{})}),(0,jsx_runtime.jsx)(DragPreviewContainer,{})]})})},"./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js":(__unused_webpack_module,exports,__webpack_require__)=>{var React=__webpack_require__("./node_modules/react/index.js");var objectIs="function"==typeof Object.is?Object.is:function is(x,y){return x===y&&(0!==x||1/x==1/y)||x!=x&&y!=y},useState=React.useState,useEffect=React.useEffect,useLayoutEffect=React.useLayoutEffect,useDebugValue=React.useDebugValue;function checkIfSnapshotChanged(inst){var latestGetSnapshot=inst.getSnapshot;inst=inst.value;try{var nextValue=latestGetSnapshot();return!objectIs(inst,nextValue)}catch(error){return!0}}var shim="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function useSyncExternalStore$1(subscribe,getSnapshot){return getSnapshot()}:function useSyncExternalStore$2(subscribe,getSnapshot){var value=getSnapshot(),_useState=useState({inst:{value,getSnapshot}}),inst=_useState[0].inst,forceUpdate=_useState[1];return useLayoutEffect(function(){inst.value=value,inst.getSnapshot=getSnapshot,checkIfSnapshotChanged(inst)&&forceUpdate({inst})},[subscribe,value,getSnapshot]),useEffect(function(){return checkIfSnapshotChanged(inst)&&forceUpdate({inst}),subscribe(function(){checkIfSnapshotChanged(inst)&&forceUpdate({inst})})},[subscribe]),useDebugValue(value),value};exports.useSyncExternalStore=void 0!==React.useSyncExternalStore?React.useSyncExternalStore:shim},"./node_modules/use-sync-external-store/shim/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js")}}]);